{"./":{"url":"./","title":"Swiftä¸­çš„å¯é€‰ç±»å‹?å’Œéšå¼è§£æå¯é€‰ç±»å‹!","keywords":"","body":"Swiftä¸­çš„å¯é€‰ç±»å‹?å’Œéšå¼è§£æå¯é€‰ç±»å‹! Swiftæ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œå¯é€‰ç±»å‹çš„å¼•å…¥ä¹Ÿè®©æˆ‘ä»¬çš„ç¼–ç å˜å¾—æ›´åŠ å®‰å…¨ã€‚ä½†æ˜¯æ»¡å±çš„?å’Œ!ä¹Ÿä¼šè®©äººå¾ˆçƒ¦ã€‚äºæ˜¯æˆ‘ä»¬æœ‰æ—¶å€™ä¼šä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ï¼ˆimplicitly unwrapped optionalsï¼‰ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•æ­£ç¡®ä½¿ç”¨è¿™ç§ç±»å‹ã€‚ å¯é€‰ç±»å‹? å¼€å‘ä¸­ç»å¸¸ä¼šéœ€è¦å¤„ç†å˜é‡å€¼ä¸ºç©ºçš„æƒ…å†µï¼ŒSwiftä½œä¸ºä¸€ç§ç±»å‹å®‰å…¨çš„è¯­è¨€å¾ˆé‡è§†å€¼ä¸ºç©ºçš„æƒ…å†µã€‚äºæ˜¯å¼•å…¥äº†å¯é€‰ç±»å‹ã€‚ å¯é€‰ç±»å‹çš„å€¼å¯èƒ½æœ‰å€¼ï¼Œä¹Ÿå¯èƒ½ä¸ºç©ºå€¼ã€‚æ‰€ä»¥å¿…é¡»è¦å¤„ç†å¯èƒ½ä¸ºç©ºå€¼nilæ—¶çš„æƒ…å†µ let possibleString: String? = \"Hello\" if let actualString = possibleString { // actualStringæ˜¯æ™®é€šï¼ˆéå¯é€‰ï¼‰å­—ç¬¦ä¸²ï¼Œå…¶å€¼ä¸possibleStringä¸­çš„å€¼ç›¸åŒ print(actualString) //è¾“å‡º\"Hello\\n\" } else { // possibleStringä¸ºç©ºå€¼æ—¶çš„æƒ…å†µ } å¯é€‰ç±»å‹çš„å€¼æ˜¯å¯é€‰å€¼ï¼Œè¿™åœ¨å­—ç¬¦ä¸²ç±»å‹ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„ let possibleString: String? = \"Hello\" print(possibleString) //ç¼–è¯‘å™¨ä¼šæç¤ºâ€œExpression implicitly coerced from 'String?' to Anyâ€ï¼› // æ­¤æ—¶æ‰“å°å‡ºæ¥çš„å€¼æ˜¯\"Optional(\"Hello\")\" å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå¦‚æœç›´æ¥ä½¿ç”¨å¯é€‰å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå€¼å°†ä¼šåŒ…å«åœ¨Optional(\"\")ä¸­ã€‚æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨å¼ºåˆ¶è§£æç¬¦å·! let possibleString: String? = \"Hello\" print(possibleString!) // \"Hello\\n\" ä½¿ç”¨å¯é€‰ç±»å‹å¯ä»¥è®©ä»£ç æ›´åŠ ä¸¥è°¨ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªä½¿ç”¨çš„åœ°æ–¹å¼ºè¿«ä½ å»æ€è€ƒè¿™é‡Œæ˜¯å¦å¯èƒ½ä¸ºç©ºã€‚ // åº”ç”¨åœºæ™¯ // é”™è¯¯å†™æ³•: let url: URL = URL(string: \"http://www.baidu.com\") // å› ä¸ºURLçš„æ„é€ å‡½æ•°å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒçš„è¿”å›å€¼æ˜¯URL?ç±»å‹ // æ­£ç¡®å†™æ³•: let url: URL? = URL(string: \"http://www.baidu.com\") // ä½¿ç”¨ç±»å‹æ¨å¯¼ let url = URL(string: \"http://www.baidu.com\") /* ä¸æ¨èå†™æ³• if url != nil { URLRequest(url: url!) } */ // è¯¥è¯­æ³•ç§°ä¸ºå¯é€‰ç»‘å®šï¼ˆå¦‚æœurlæœ‰å€¼å°±è§£åŒ…èµ‹å€¼ç»™tempUrlï¼Œå¹¶æ‰§è¡Œ{}ï¼‰ if let tempUrl = url { URLRequest(url: tempUrl) } éšå¼è§£æå¯é€‰ç±»å‹ å¦‚ä¸Šæ‰€ç¤ºï¼Œå¯é€‰ç±»å‹åœ¨ä½¿ç”¨ä¸­éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå€¼ï¼Œé‚£ä¹ˆè¿™å°±å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šæ€ä¹ˆç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹æ˜¯æœ‰å€¼çš„å‘¢ï¼Ÿ æ¯”å¦‚åƒè¿™æ · var dog: String? = \"wangcai\" let cat: String = dog // Error: Value of optional type 'String?' not unwrapped; did you mean to use '!' or '?'? å¦‚ä¸Šï¼Œå˜é‡catåœ¨æ¥å—èµ‹å€¼æ—¶æ— æ³•ç¡®å®šdogæ˜¯ä¸æ˜¯nilï¼Œå› ä¸ºå®ƒæ˜¯å¯é€‰ç±»å‹ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥é”™ã€‚ æ‰€ä»¥ï¼Œå°±åƒä¸Šæ–‡æ‰€è¯´ä½¿ç”¨å¼ºåˆ¶è§£æ!æ¥è¡¨ç¤ºæˆ‘æœ‰å€¼ã€‚æˆ–è€…catä¹Ÿå£°æ˜ä¸ºå¯é€‰ç±»å‹ var dog: String? = \"wangcai\" let cat: String? = dog ä¸ºäº†çœå¿ƒï¼Œæˆ‘ä»¬ä½¿ç”¨å¼ºåˆ¶è§£æ!ï¼Œä½†æ˜¯ä»¥ä¸‹æƒ…å†µå°±ä¸çœå¿ƒäº† var dog: String? = \"wangcai\" //dogå˜é‡æƒ³è¦ç»™ä¸€ä¸ªéå¯é€‰ç±»å‹çš„catå˜é‡èµ‹å€¼ let cat: String = dog! //catè¯´ï¼Œå—¯ï¼Œæˆ‘å·²ç»æ‹¿åˆ°å•¦ï¼Œä¹ˆä¹ˆå“’ï¼ let tiger: String = dog! //helloï¼Œæˆ‘æ˜¯æ—ºè´¢ï½ let fish: String = dog! //æˆ‘æ˜¯æ—ºè´¢ï½ let bird: String = dog! //æ—ºè´¢ã€‚ã€‚ã€‚ let sheep: String = dog! //ä¸ºä»€ä¹ˆæ¯æ¬¡éƒ½å¾—éªŒè¯ä¸€é let mouse: String = dog! //å¿ƒå¥½ç´¯ ä¸ºäº†ä¸å‡ºç°æ»¡å±çš„!ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨éšå¼è§£æå¯é€‰ç±»å‹ var dog: String! = \"wangcai\" //dogå˜é‡æƒ³è¦ç»™ä¸€ä¸ªéå¯é€‰ç±»å‹çš„catå˜é‡èµ‹å€¼ let cat: String = dog //catè¯´ï¼Œå—¯ï¼Œæˆ‘å·²ç»æ‹¿åˆ°å•¦ï¼Œä¹ˆä¹ˆå“’ï¼ let tiger: String = dog //ok let fish: String = dog //ok let bird: String = dog //ok let sheep: String = dog //ok let mouse: String = dog //ok çœ‹ï¼Œå°†dogå£°æ˜ä¸ºéšå¼è§£æå¯é€‰ç±»å‹String!çœå»äº†æ»¡ä¸–ç•Œçš„!ã€‚ é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦ä¸€ç›´ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹å°±ä¸‡äº‹å¤§å‰äº†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯Noã€‚å› ä¸ºéšå¼è§£æå¯é€‰ç±»å‹è¿˜æ˜¯å¯é€‰ç±»å‹ï¼Œå®ƒæ˜¯å¯ä»¥ä¸ºç©ºçš„ã€‚å¦‚æœåœ¨ç©ºå€¼æ—¶è¢«ä½¿ç”¨ï¼Œç¨‹åºå°±ä¼šCrashã€‚ var url: URL! = URL(string: \"www.baidu.com\") url = nil // nothing happened URLRequest(url: url) // fatal error: unexpectedly found nil while unwrapping an Optional value ä»€ä¹ˆæ—¶å€™ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ï¼Ÿ 1ã€åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸èƒ½å®šä¹‰çš„å¸¸é‡ æ¯ä¸€ä¸ªæˆå‘˜å¸¸é‡åœ¨åˆå§‹åŒ–å®Œæˆåä¸€å®šä¼šæœ‰ä¸€ä¸ªå€¼ã€‚ç„¶è€Œæœ‰çš„æ—¶å€™åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸èƒ½ç¡®å®šä¼šæœ‰æ­£ç¡®çš„å€¼ï¼Œä½†æ˜¯åˆå¯ä»¥ç¡®ä¿åœ¨è¢«è®¿é—®å‰ä¸€å®šä¼šæœ‰å€¼ã€‚ä½¿ç”¨å¯é€‰å˜é‡ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºå¯é€‰å˜é‡åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨è¢«èµ‹äºˆnilï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–ç»“æŸæ—¶è¢«èµ‹äºˆæ­£ç¡®çš„å€¼ã€‚ä½†æ˜¯ä½¿ç”¨æ—¶çš„å¼ºåˆ¶è§£åŒ…ä¼šå¾ˆç—›è‹¦ï¼Œæ»¡å±å¹•éƒ½ä¼šæ˜¯!ã€‚ä»¥ä¸‹å±•ç¤ºäº†ä¸€ä¸ªæˆå‘˜å˜é‡åœ¨è§†å›¾åŠ è½½å®Œæˆä¹‹å‰ä¸èƒ½å®Œæˆåˆå§‹åŒ–çš„ä¾‹å­ï¼š class MyController: UIViewController { @IBOutlet var button: UIButton! var buttonOriginalWidth: CGFloat! override func viewDidLoad() { self.buttonOriginalWidth = self.button.frame.size.width } } è¿™é‡Œæœ‰2ä¸ªéšå¼è§£æå¯é€‰ç±»å‹ã€‚IBOutletç±»å‹æ˜¯Xcodeå¼ºåˆ¶ä¸ºå¯é€‰ç±»å‹çš„ï¼Œå› ä¸ºå®ƒä¸æ˜¯åœ¨åˆå§‹åŒ–æ—¶èµ‹å€¼çš„ï¼Œè€Œæ˜¯åœ¨åŠ è½½è§†å›¾çš„æ—¶å€™ã€‚ä½ å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºæ™®é€šå¯é€‰ç±»å‹ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªè§†å›¾åŠ è½½æ­£ç¡®ï¼Œå®ƒæ˜¯ä¸ä¼šä¸ºç©ºçš„ã€‚åœ¨è§†å›¾åŠ è½½å®Œæˆä¹‹å‰ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“buttonçš„åˆå§‹å®½åº¦ã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“viewDidLoadæ–¹æ³•ä¼šåœ¨ä»»ä½•æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ï¼ˆé™¤äº†åˆå§‹åŒ–å‡½æ•°ï¼‰ã€‚ä¸å…¶åœ¨æ‰€æœ‰åœ°æ–¹å¼ºåˆ¶è§£åŒ…ï¼Œä¸å¦‚å®šä¹‰æˆéšå¼è§£æå¯é€‰ç±»å‹ã€‚ 2ã€å½“ç¨‹åºä¸èƒ½åœ¨æŸä¸ªå˜é‡ä¸ºnilåæ¢å¤ è¿™ç§æƒ…å†µéå¸¸ç½•è§ã€‚å¦‚æœåº”ç”¨ç¨‹åºåœ¨è®¿é—®æŸä¸ªç©ºçš„å˜é‡æ—¶æ— æ³•ç»§ç»­è¿è¡Œï¼Œé‚£ä¹ˆä¹Ÿå°±æ— éœ€å†åˆ¤ç©ºäº†ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœç¨‹åºå¿…é¡»ç¬¦åˆæŸä¸ªæ¡ä»¶æ‰èƒ½ç»§ç»­è¿è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–­è¨€ã€‚ ä»€ä¹ˆæ—¶å€™ä¸ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ï¼Ÿ 1ã€å»¶è¿ŸåŠ è½½è®¡ç®—ç±»å‹æˆå‘˜ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ°¸è¿œä¸ä¸ºç©ºçš„æˆå‘˜å˜é‡ï¼Œä½†æ˜¯å®ƒå¯èƒ½åœ¨åˆå§‹åŒ–æ—¶ä¸èƒ½è¢«æ­£ç¡®èµ‹å€¼ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ã€‚ä¸è¿‡æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼š class FileSystemItem { } class Directory: FileSystemItem { lazy var contents: [FileSystemItem] = { var loadedContents = [FileSystemItem]() // load contents and append to loadedContents return loadedContents }() } å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œcontentsä¸ä¼šè¢«åˆå§‹åŒ–ç›´åˆ°å®ƒç¬¬ä¸€æ¬¡è¢«è®¿é—®ã€‚ 2ã€å¦å¤–ä»»ä½•åœ°æ–¹ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¦é¿å…ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ï¼Œå› ä¸ºä¸€æ—¦ä½¿ç”¨é”™è¯¯å°±ä¼šé€ æˆç¨‹åºCrashã€‚å¦‚æœä¸ç¡®å®šä¸€ä¸ªå˜é‡æ˜¯å¦ä¼šæ˜¯nilï¼Œå°±é»˜è®¤ä½¿ç”¨æ™®é€šå¯é€‰ç±»å‹ã€‚å»è§£åŒ…ä¸€ä¸ªä¸ä¼šæ˜¯nilçš„å˜é‡ä¸ä¼šæœ‰ä»€ä¹ˆå‰¯ä½œç”¨ã€‚ å‚è€ƒ Swiftä¸­çš„å¯é€‰ç±»å‹?å’Œéšå¼è§£æå¯é€‰ç±»å‹! Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-12 15:24:04 "},"content/iOS/Swiftif-let&guard-let.html":{"url":"content/iOS/Swiftif-let&guard-let.html","title":"Swift if-let & guard-let","keywords":"","body":"Swift if-let & guard-let 1ã€if letç”¨æ³• 1.1 æ™®é€šifä¸if letçš„æ¯”è¾ƒ 1ã€ å¦‚æœå¸¸é‡æ˜¯å¯é€‰é¡¹ï¼ˆOptionalï¼‰ï¼Œifåˆ¤æ–­åä»ç„¶éœ€è¦è§£åŒ…ï¼ˆ!ï¼‰ let name: String? = \"è€ç‹\" let age: Int? = 10 if name != nil && age != nil { print(name! + String(age!)) // è¾“å‡º:è€ç‹10 } 2ã€å¦‚æœå¸¸é‡æ˜¯å¯é€‰é¡¹ï¼ˆOptionalï¼‰ï¼Œif letåˆ¤æ–­åä¸éœ€è¦è§£åŒ…ï¼ˆ!ï¼‰ï¼Œ{ }å†…ä¸€å®šæœ‰å€¼ let name: String? = \"è€ç‹\" let age: Int? = 10 // if let è¿ç”¨,åˆ¤æ–­å¯¹è±¡çš„å€¼æ˜¯å¦ä¸º'nil' if let nameNew = name, let ageNew = age { // è¿›å…¥åˆ†æ”¯å,nameNew å’Œ ageNew ä¸€å®šæœ‰å€¼ print(nameNew + String(ageNew)) // è¾“å‡º:è€ç‹10 } Tipsï¼šnameNewå’Œ ageNewçš„ä½œç”¨åŸŸä»…åœ¨{}ä¸­ 2ã€guard letç”¨æ³• 1ã€guard letå’Œif letåˆšå¥½ç›¸åï¼Œguard letå®ˆæŠ¤ä¸€å®šæœ‰å€¼ã€‚å¦‚æœæ²¡æœ‰ï¼Œç›´æ¥è¿”å›ã€‚ 2ã€é€šå¸¸åˆ¤æ–­æ˜¯å¦æœ‰å€¼ä¹‹åï¼Œä¼šåšå…·ä½“çš„é€»è¾‘å®ç°ï¼Œé€šå¸¸ä»£ç å¤š 3ã€å¦‚æœç”¨ if letå‡­ç©ºå¤šäº†ä¸€å±‚åˆ†æ”¯ï¼Œguard letæ˜¯é™ä½åˆ†æ”¯å±‚æ¬¡çš„åŠæ³• 4ã€guard letè¯­æ³•æ˜¯ Swift 2.0 æ¨å‡ºçš„ let name: String? = \"è€ç‹\" let age: Int? = 10 guard let nameNew = name, let ageNew = age else { print(\"å§“å æˆ– å¹´é¾„ ä¸ºnil\") return } // ä»£ç æ‰§è¡Œè‡³æ­¤, nameNew å’Œ ageNew ä¸€å®šæœ‰å€¼ print(nameNew + String(ageNew)) // è¾“å‡º:è€ç‹10 3ã€ if letå’Œguard letçš„å‘½åæŠ€å·§ æŠ€å·§ï¼šå–å’Œå‚æ•°åç›¸åŒçš„å˜é‡å 1ã€guard letæ¼”ç¤º override func viewDidLoad() { super.viewDidLoad() demo(name: \"è€ç‹\", age: 11) } func demo(name: String?, age: Int?) { guard let name = name, let age = age else { print(\"å§“åæˆ–å¹´é¾„ä¸ºnil\") return } /** * 'name'è‡³æ­¤ä¼šæœ‰ä¸¤ä¸ª * 1.String name('guard let'å®ˆæŠ¤,ç­‰å·å³è¾¹çš„'name') * 2.String? name('guard let'å®ˆæŠ¤,ç­‰å·å³è¾¹çš„'name') * 3.è¿™é‡Œæ­£å¸¸åº”è¯¥é€‰æ‹©ä¸å¸¦'?'çš„'name',ä½†æ˜¯å³ä¾¿æ˜¯é€‰æ‹©äº†('Optional'çš„'name'),ç¼–è¯‘å™¨ä¹Ÿä¼šå¸®ä½ æ›´æ­£è¿‡æ¥,è¿™å°±æ˜¯å–åçš„æŠ€å·§ */ print(name + String(age)) // è¾“å‡º:è€ç‹11('name'å’Œ'age'ä¸ºä¸å¸¦'Optional'çš„) } 2ã€if letæ¼”ç¤º override func viewDidLoad() { super.viewDidLoad() demo(name: \"è€ç‹\", age: 11) } func demo(name: String?, age: Int?) { if let name = name, let age = age { /** * 'name'è‡³æ­¤åªä¼šæœ‰ä¸¤ä¸ª * 1.String name('if let'å®ˆæŠ¤,ç­‰å·å³è¾¹çš„'name',ä»…åœ¨'{}'ä½œç”¨åŸŸå†…æœ‰æ•ˆ) * 2.String? name('if let'å®ˆæŠ¤,ç­‰å·å³è¾¹çš„'name') * 3.è¿™é‡Œæ­£å¸¸åº”è¯¥é€‰æ‹©ä¸å¸¦'?'çš„'name',ä½†æ˜¯å³ä¾¿æ˜¯é€‰æ‹©äº†('Optional'çš„'name'),ç¼–è¯‘å™¨ä¹Ÿä¼šå¸®ä½ æ›´æ­£è¿‡æ¥,è¿™å°±æ˜¯å–åçš„æŠ€å·§ * 4.å¦‚æœ'name'æˆ–'age'ä¸­æœ‰ä¸€ä¸ªä¸º'nil',æˆ–è€…éƒ½ä¸º'nil',ä¸‹é¢å°±ä¸ä¼šè¾“å‡º */ print(name + String(age)) // è¾“å‡º:è€ç‹11('name'å’Œ'age'ä¸ºä¸å¸¦'Optional'çš„) } /** * 'name'è‡³æ­¤åªä¼šæœ‰ä¸€ä¸ª * 2.String? name(demo(name: String?)ä¸­çš„'name') * 3.è¿™é‡Œæ­£å¸¸åº”è¯¥é€‰æ‹©ä¸å¸¦'?'çš„'name',ä½†æ˜¯å³ä¾¿æ˜¯é€‰æ‹©äº†('Optional'çš„'name'),ç¼–è¯‘å™¨ä¹Ÿä¼šå¸®ä½ æ›´æ­£è¿‡æ¥,è¿™å°±æ˜¯å–åçš„æŠ€å·§ */ print(\"demo(name: String?)ä¸­çš„'name'\") } 4ã€å‚è€ƒ Swift åŸºæœ¬è¯­æ³•03-\"if let\"å’Œ\"guard let\" Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-12 16:10:19 "},"content/iOS/SwiftTips.html":{"url":"content/iOS/SwiftTips.html","title":"SwiftTips","keywords":"","body":"Swift Tips ä¸€ã€ asã€as!ã€as? ä¸‰ç§ç±»å‹è½¬æ¢æ“ä½œç¬¦çš„å¼‚åŒï¼Œä»¥åŠå„è‡ªçš„ä½¿ç”¨åœºæ™¯ 1ã€asä½¿ç”¨åœºåˆ ï¼ˆ1ï¼‰ä»æ´¾ç”Ÿç±»è½¬æ¢ä¸ºåŸºç±»ï¼Œå‘ä¸Šè½¬å‹ï¼ˆupcastsï¼‰ class Animal {} class Cat: Animal {} let cat = Cat() let animal = cat as Animal ï¼ˆ2ï¼‰æ¶ˆé™¤äºŒä¹‰æ€§ï¼Œæ•°å€¼ç±»å‹è½¬æ¢ let num1 = 42 as CGFloat let num2 = 42 as Int let num3 = 42.5 as Int let num4 = (42 / 2) as Double ï¼ˆ3ï¼‰switch è¯­å¥ä¸­è¿›è¡Œæ¨¡å¼åŒ¹é…å¦‚æœä¸çŸ¥é“ä¸€ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä½ å¯ä»¥é€šè¿‡switchè¯­æ³•æ£€æµ‹å®ƒçš„ç±»å‹ï¼Œå¹¶ä¸”å°è¯•åœ¨ä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨å¯¹åº”çš„ç±»å‹è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ switch animal { case let cat as Cat: print(\"å¦‚æœæ˜¯Catç±»å‹å¯¹è±¡ï¼Œåˆ™åšç›¸åº”å¤„ç†\") case let dog as Dog: print(\"å¦‚æœæ˜¯Dogç±»å‹å¯¹è±¡ï¼Œåˆ™åšç›¸åº”å¤„ç†\") default: break } 2ã€as!ä½¿ç”¨åœºåˆ å‘ä¸‹è½¬å‹ï¼ˆDowncastingï¼‰æ—¶ä½¿ç”¨ã€‚ç”±äºæ˜¯å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ä¼šæŠ¥ runtime è¿è¡Œé”™è¯¯ã€‚ class Animal {} class Cat: Animal {} let animal :Animal = Cat() let cat = animal as! Cat 3ã€as?ä½¿ç”¨åœºåˆ as? å’Œ as! æ“ä½œç¬¦çš„è½¬æ¢è§„åˆ™å®Œå…¨ä¸€æ ·ã€‚ä½† as? å¦‚æœè½¬æ¢ä¸æˆåŠŸçš„æ—¶å€™ä¾¿ä¼šè¿”å›ä¸€ä¸ª nil å¯¹è±¡ã€‚æˆåŠŸçš„è¯è¿”å›å¯é€‰ç±»å‹å€¼ï¼ˆoptionalï¼‰ï¼Œéœ€è¦æˆ‘ä»¬æ‹†åŒ…ä½¿ç”¨ã€‚ç”±äº as? åœ¨è½¬æ¢å¤±è´¥çš„æ—¶å€™ä¹Ÿä¸ä¼šå‡ºç°é”™è¯¯ï¼Œæ‰€ä»¥å¯¹äºå¦‚æœèƒ½ç¡®ä¿100%ä¼šæˆåŠŸçš„è½¬æ¢åˆ™å¯ä½¿ç”¨ as!ï¼Œå¦åˆ™ä½¿ç”¨ as? let animal:Animal = Cat() if let cat = animal as? Cat{ print(\"cat is not nil\") } else { print(\"cat is nil\") } Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-12 14:33:25 "},"content/Mac/Homebrew.html":{"url":"content/Mac/Homebrew.html","title":"Homebrew","keywords":"","body":"Homebrew å®‰è£… åœ¨å®‰è£… Homebrew ä¹‹å‰ï¼Œéœ€è¦å°† Xcode Command Line Tools å®‰è£…å®Œæˆï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨åŸºäº Xcode Command Line Tools ç¼–è¯‘çš„ Homebrewã€‚åœ¨ Terminal ä¸­å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼ˆä¸åŒ…æ‹¬ $ï¼‰ï¼Œè·ŸéšæŒ‡å¼•ï¼Œå°†å®Œæˆ Hombrew å®‰è£…ã€‚ $ ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" ç´§æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€ä»¶äº‹è®©é€šè¿‡ Homebrew å®‰è£…çš„ç¨‹åºçš„å¯åŠ¨é“¾æ¥ (åœ¨ /usr/local/binä¸­ï¼‰å¯ä»¥ç›´æ¥è¿è¡Œï¼Œæ— éœ€å°†å®Œæ•´è·¯å¾„å†™å‡ºã€‚é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°† /usr/local/bin æ·»åŠ è‡³ $PATH ç¯å¢ƒå˜é‡ä¸­: $ echo 'export PATH=\"/usr/local/bin:$PATH\"' >> ~/.bash_profile Cmd+T æ‰“å¼€ä¸€ä¸ªæ–°çš„ terminal æ ‡ç­¾é¡µï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿ brew è¿è¡Œæ­£å¸¸ã€‚ $ brew -v æ›´æ¢æº æ›¿æ¢brew.git: cd \"$(brew --repo)\" git remote set-url origin https://mirrors.ustc.edu.cn/brew.git æ›¿æ¢homebrew-core.git: cd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\" git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git å¸¸ç”¨å‘½ä»¤ 1.å®‰è£…å¸è½½è½¯ä»¶ 1. brew --versionæˆ–è€…brew -v æ˜¾ç¤ºbrewç‰ˆæœ¬ä¿¡æ¯ 2. brew install å®‰è£…æŒ‡å®šè½¯ä»¶ 3. brew unistall å¸è½½æŒ‡å®šè½¯ä»¶ 4. brew list æ˜¾ç¤ºæ‰€æœ‰çš„å·²å®‰è£…çš„è½¯ä»¶ 5. brew search text æœç´¢æœ¬åœ°è¿œç¨‹ä»“åº“çš„è½¯ä»¶ï¼Œå·²å®‰è£…ä¼šæ˜¾ç¤ºç»¿è‰²çš„å‹¾ 6. brew search /text/ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœè½¯ä»¶ 2.å‡çº§è½¯ä»¶ç›¸å…³ 1. brew update è‡ªåŠ¨å‡çº§homebrewï¼ˆä»githubä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼‰ 2. brew outdated æ£€æµ‹å·²ç»è¿‡æ—¶çš„è½¯ä»¶ 3. brew upgrade å‡çº§æ‰€æœ‰å·²è¿‡æ—¶çš„è½¯ä»¶ï¼Œå³åˆ—å‡ºçš„ä»¥è¿‡æ—¶è½¯ä»¶ 4. brew upgrade å‡çº§æŒ‡å®šçš„è½¯ä»¶ 5. brew pin ç¦æ­¢æŒ‡å®šè½¯ä»¶å‡çº§ 6. brew unpin è§£é”ç¦æ­¢å‡çº§ 7. brew upgrade --all å‡çº§æ‰€æœ‰çš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬æœªæ¸…ç†å¹²å‡€çš„æ—§ç‰ˆæœ¬çš„åŒ… 3.æ¸…ç†ç›¸å…³ homebrewå†å‡çº§è½¯ä»¶æ—¶å€™ä¸ä¼šæ¸…ç†ç›¸å…³çš„æ—§ç‰ˆæœ¬ï¼Œåœ¨è½¯ä»¶å‡çº§åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¸…ç† 1. brew cleanup -n åˆ—å‡ºéœ€è¦æ¸…ç†çš„å†…å®¹ 2. brew cleanup æ¸…ç†æŒ‡å®šçš„è½¯ä»¶è¿‡æ—¶åŒ… 3. brew cleanup æ¸…ç†æ‰€æœ‰çš„è¿‡æ—¶è½¯ä»¶ 4. brew unistall å¸è½½æŒ‡å®šè½¯ä»¶ 5. brew unistall --force å½»åº•å¸è½½æŒ‡å®šè½¯ä»¶ï¼ŒåŒ…æ‹¬æ—§ç‰ˆæœ¬ é€šè¿‡brewå®‰è£…çš„æ–‡ä»¶ä¼šè‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå‘½ä»¤è¡Œä¸èƒ½å¯åŠ¨çš„é—®é¢˜ã€‚ 4.å‚è€ƒ Homebrewå®˜ç½‘ HomeBrewå¸¸è§„ä½¿ç”¨æ•™ç¨‹ å…³äºmacOSçš„ç›®å½•å’Œè½¯ä»¶å®‰è£… Brew çš„å·¥ä½œç»†èŠ‚ 5.é—®é¢˜è®°å½• `usr/bin occurs before /usr/local/bin` //æ‰“å¼€paths vim /etc/paths /*and add /usr/local/bin and /usr/local/sbin like this*/ /usr/local/bin /usr/local/sbin /usr/bin /bin /usr/sbin /sbin /*é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£*/ env|grep PATH è¾“å‡ºï¼šPATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:14:02 "},"content/ReactNative/ReactNativeå¸¸ç”¨å‘½ä»¤.html":{"url":"content/ReactNative/ReactNativeå¸¸ç”¨å‘½ä»¤.html","title":"ReactNativeå¸¸ç”¨å‘½ä»¤","keywords":"","body":"ReactNativeå¸¸ç”¨å‘½ä»¤ 1ã€åˆ›å»ºé¡¹ç›® //é»˜è®¤ä½¿ç”¨æœ€æ–°çš„RNç‰ˆæœ¬åˆ›å»º react-native init MyApp //æŒ‡å®šå…·ä½“çš„RNç‰ˆæœ¬ react-native init MyApp --version 0.44.0 2ã€å®‰è£…/å¸è½½æŒ‡å®šçš„åº“(--save è®°å½•åˆ°package.json) //å®‰è£…æ‰€æœ‰çš„åº“ npm install //å®‰è£…å…·ä½“çš„åº“ npm install xxxlib --save //å¸è½½ npm uninstall xxxlib --save 3ã€å‡çº§æŒ‡å®šçš„ç¬¬ä¸‰æ–¹åº“ //1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆpackage.jsonåŒçº§ç›®å½•ï¼‰æŸ¥çœ‹è¿‡æœŸçš„npmåŒ… npm outdated //2ã€åœ¨package.jsonæ–‡ä»¶é‡Œæ‰¾åˆ°éœ€è¦å‡çº§çš„åº“ï¼Œä¿®æ”¹ä¸ºéœ€è¦çš„ç‰ˆæœ¬å· //3ã€æ‰§è¡Œ npm update xxxxlib //4ã€å‡çº§å®Œæˆåï¼Œé‡æ–°å¼€å¯serverå¹¶é‡ç½®ç¼“å­˜ npm start -- --reset-cache 4ã€linkåº“æ–‡ä»¶ //linkæ‰€æœ‰çš„åº“ react-native link //linkæŒ‡å®šçš„åº“ react-native link xxxxlib 5ã€å¯åŠ¨npmæœåŠ¡ //iOS //é»˜è®¤å¯åŠ¨iPhone6æ¨¡æ‹Ÿå™¨ react-native run-ios //æŒ‡å®šå…·ä½“çš„æ¨¡æ‹Ÿå™¨ react-native run-ios --simulator \"iPhone X\" react-native run-ios --simulator \"iPhone 8\" //Android react-native run-android Tipsï¼šç»ˆç«¯æŸ¥çœ‹/å¯åŠ¨iOSæ¨¡æ‹Ÿå™¨ //æ¨¡æ‹Ÿå™¨åˆ—è¡¨ xcrun instruments -s //å¯åŠ¨æ¨¡æ‹Ÿå™¨ xcrun instruments -w \"iPhone XS Max (12.0) [BFAC9D75-39B7-4885-B34E-6CEB4D31D448]\" 6ã€Clearing the Cache of your React Native Project: RN >= 0.50 watchman watch-del-all && rm -rf $TMPDIR/react-native-packager-cache-* && rm -rf $TMPDIR/metro-bundler-cache-* && rm -rf node_modules/ && npm cache clean && npm install && npm start -- --reset-cache RN watchman watch-del-all && rm -rf $TMPDIR/react-* && rm -rf node_modules/ && npm cache clean && npm install && npm start -- --reset-cache 7ã€ç¦»çº¿åŒ…èµ„æºæ•´åˆ //iOS //åœ¨RNå·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹å…ˆåˆ›å»ºrelease_iosæ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œmain.jsbundleåŠassertèµ„æºæ–‡ä»¶å¤¹æ‰“åŒ…å®Œæˆä¹‹åï¼Œæ·»åŠ åˆ°iOSå·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹ï¼Œç„¶åæ­£å¸¸runåŠarchiverï¼Œå°±ä¼šè‡ªåŠ¨è¯»å–appåŒ…é‡Œé¢çš„jsæ–‡ä»¶ã€‚ react-native bundle --entry-file index.js --platform ios --dev false --bundle-output release_ios/main.jsbundle --assets-dest release_ios/ //Android //é¦–å…ˆåœ¨ï¼šandroid/app/src/main/ ç›®å½•ä¸‹åˆ›å»º assets ç›®å½• react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res/ Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:12:46 "},"content/ReactNative/ReactNativeé›†æˆåˆ°åŸç”Ÿé¡¹ç›®.html":{"url":"content/ReactNative/ReactNativeé›†æˆåˆ°åŸç”Ÿé¡¹ç›®.html","title":"ReactNativeé›†æˆåˆ°åŸç”Ÿé¡¹ç›®","keywords":"","body":"ReactNativeé›†æˆè‡³ç°æœ‰åŸç”Ÿé¡¹ç›® ä¸€ã€å‡†å¤‡ 1ã€ åˆ›å»º /iosç›®å½•ï¼Œå¹¶æ‹·è´iOSåŸç”Ÿé¡¹ç›®çš„æ‰€æœ‰å·¥ç¨‹æ–‡ä»¶åˆ°è¯¥ç›®å½•ä¸‹ï¼› 2ã€ åˆ›å»º/androidç›®å½•ï¼Œå¹¶æ‹·è´AndroidåŸç”Ÿé¡¹ç›®çš„æ‰€æœ‰å·¥ç¨‹æ–‡ä»¶åˆ°è¯¥ç›®å½•ä¸‹ï¼› 3ã€ åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºpackage.jsonæ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼› { \"name\": \"MyReactNativeApp\", \"version\": \"0.0.1\", \"private\": true, \"scripts\": { \"start\": \"node node_modules/react-native/local-cli/cli.js start\" } } 4ã€ æ ¹ç›®å½•ä¸‹æ‰§è¡Œ yarn add react-native æˆ–è€…`npm i --save react-native`` 5ã€ å®‰è£…ä¸å½“å‰react-nativeç‰ˆæœ¬é…å¥—çš„react å¯ä»¥æ ¹æ®æ­¥éª¤å››ä¸­è¾“å‡ºçš„è­¦å‘Šä¿¡æ¯æŸ¥çœ‹ï¼Œå…·ä½“ç‰ˆæœ¬å¦‚ï¼šwarning \"react-native@0.57.6\" has unmet peer dependency \"react@16.6.1\". æˆ–è€…ç›´æ¥æŸ¥çœ‹react-nativeçš„package.jsonä¸­ä¾èµ–reactçš„ç‰ˆæœ¬package.json yarn add react@16.6.1 æˆ– `npm i --save react@16.6.1`` 6ã€ å·¥ç¨‹ç›®å½• äºŒã€iOSé›†æˆ æ³¨æ„ï¼šæ­¤å¤„é»˜è®¤æœ¬æœºcocoapodså·²å®‰è£…å®Œæˆï¼Œæœªå®‰è£…çš„å¯å…ˆgoogleå¯¹åº”æ•™ç¨‹å®‰è£…ã€‚å‚è€ƒï¼šCocoaPodså®‰è£…æ–¹æ³• 1ã€ åœ¨\\iosæ ¹ç›®å½•ä¸‹ï¼Œç»ˆç«¯æ‰§è¡Œpod initï¼Œç”ŸæˆPodfileæ–‡ä»¶ï¼› 2ã€ ç¼–è¾‘Podfileæ–‡ä»¶ï¼Œå¯å‚è€ƒå¦‚ä¸‹é…ç½®ï¼š # Uncomment the next line to define a global platform for your project platform :ios, '9.0' target 'MyReactNativeApp' do # Uncomment the next line if you're using Swift or would like to use dynamic frameworks # use_frameworks! # Pods for MyReactNativeApp # 'node_modules'ç›®å½•ä¸€èˆ¬ä½äºæ ¹ç›®å½•ä¸­ # ä½†æ˜¯å¦‚æœä½ çš„ç»“æ„ä¸åŒï¼Œé‚£ä½ å°±è¦æ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ä¸‹é¢çš„`:path` pod 'React', :path => '../node_modules/react-native', :subspecs => [ 'Core', 'CxxBridge', # å¦‚æœRNç‰ˆæœ¬ >= 0.47åˆ™åŠ å…¥æ­¤è¡Œ 'DevSupport', # å¦‚æœRNç‰ˆæœ¬ >= 0.43ï¼Œåˆ™éœ€è¦åŠ å…¥æ­¤è¡Œæ‰èƒ½å¼€å¯å¼€å‘è€…èœå• 'RCTText', 'RCTNetwork', 'RCTWebSocket', # è°ƒè¯•åŠŸèƒ½éœ€è¦æ­¤æ¨¡å— 'RCTAnimation', # FlatListå’ŒåŸç”ŸåŠ¨ç”»åŠŸèƒ½éœ€è¦æ­¤æ¨¡å— # åœ¨è¿™é‡Œç»§ç»­æ·»åŠ ä½ æ‰€éœ€è¦çš„å…¶ä»–RNæ¨¡å— 'RCTActionSheet', 'RCTBlob', 'RCTGeolocation', 'RCTImage', 'RCTSettings', 'RCTVibration', 'RCTLinkingIOS', ] # å¦‚æœä½ çš„RNç‰ˆæœ¬ >= 0.42.0ï¼Œåˆ™åŠ å…¥ä¸‹é¢è¿™è¡Œ pod 'yoga', :path => '../node_modules/react-native/ReactCommon/yoga' # å¦‚æœRNç‰ˆæœ¬ >= 0.45åˆ™åŠ å…¥ä¸‹é¢ä¸‰ä¸ªç¬¬ä¸‰æ–¹ç¼–è¯‘ä¾èµ– pod 'DoubleConversion', :podspec => '../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec' pod 'glog', :podspec => '../node_modules/react-native/third-party-podspecs/glog.podspec' pod 'Folly', :podspec => '../node_modules/react-native/third-party-podspecs/Folly.podspec' target 'MyReactNativeAppTests' do inherit! :search_paths # Pods for testing end target 'MyReactNativeAppUITests' do inherit! :search_paths # Pods for testing end end 3ã€ æ‰§è¡Œpod installï¼› 4ã€ å·¥ç¨‹æ ¹ç›®å½•ä¸‹åˆ›å»ºindex.js import React, {Component} from 'react'; import { AppRegistry, StyleSheet, View, Text, } from 'react-native'; class index extends Component { render() { return ( æˆ‘æ˜¯ReactNative ! ); } } const styles = StyleSheet.create({ container:{ flex:1, backgroundColor:'green', justifyContent:'center', alignItems:'center' } }); AppRegistry.registerComponent(\"MyReactNativeApp\", () => index); 5ã€ åœ¨åŸç”Ÿé¡¹ç›®ä¸­æµ‹è¯•ï¼š åœ¨éœ€è¦è·³è½¬çš„ViewControllerï¼š #import #import - (void)pushToReactNativeVc { NSURL *jsBundleLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil]; RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsBundleLocation moduleName:@\"MyReactNativeApp\" initialProperties:nil launchOptions:nil]; UIViewController *vc = [[UIViewController alloc] init]; vc.view = rootView; [self.navigationController pushViewController:vc animated:YES]; } Tipsï¼šå¦‚æœé‡åˆ° å¦‚ä¸‹é”™è¯¯ æ‰“å¼€Build Phasesâ†’Link Binary With Librariesç‚¹å‡» + ,ç„¶åæ·»åŠ å¦‚ä¸‹çš„.aé™æ€åº“ ä¸‰ã€Androidé›†æˆ 3.1 é…ç½®Gradle 1ã€Mavenæ˜¯åŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹(POM project object model)ï¼Œå¯ä»¥é€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯ï¼ˆé…ç½®ï¼‰æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡æ¡£çš„è½¯ä»¶é¡¹ç›®ç®¡ç†å·¥å…·ã€‚Mavençš„æ ¸å¿ƒåŠŸèƒ½ä¾¿æ˜¯åˆç†å™è¿°é¡¹ç›®é—´çš„ä¾èµ–å…³ç³»ï¼Œé€šä¿—ç‚¹è®²ï¼Œå°±æ˜¯é€šè¿‡pom.xmlæ–‡ä»¶çš„é…ç½®è·å–jaråŒ…ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨å»æ·»åŠ jaråŒ…ï¼› 2ã€GradleæŠ›å¼ƒäº†ä¼ ç»ŸåŸºäºXMLï¼ˆå¦‚Antå’ŒMavenï¼‰çš„å„ç§ç¹çé…ç½®ï¼Œä½¿ç”¨äº†åŸºäºGroovyçš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰æ¥å£°æ˜é¡¹ç›®é…ç½®ã€‚ 3ã€Gradleå…¼å®¹Mavenä»“åº“ã€‚ 3.1.1 åœ¨app ä¸­ build.gradle æ–‡ä»¶ä¸­æ·»åŠ  React Native ä¾èµ– dependencies { implementation 'com.android.support:appcompat-v7:23.0.1' ... implementation \"com.facebook.react:react-native:+\" // From node_modules } å¦‚æœæƒ³è¦æŒ‡å®šç‰¹å®šçš„ React Native ç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨å…·ä½“çš„ç‰ˆæœ¬å·æ›¿æ¢ +ï¼Œå½“ç„¶å‰ææ˜¯ä½ ä» npm é‡Œä¸‹è½½çš„æ˜¯è¿™ä¸ªç‰ˆæœ¬ã€‚ 3.1.2 åœ¨é¡¹ç›®çš„ build.gradle æ–‡ä»¶ä¸­ä¸º React Native æ·»åŠ ä¸€ä¸ª maven ä¾èµ–çš„å…¥å£ï¼Œå¿…é¡»å†™åœ¨ \"allprojects\" ä»£ç å—ä¸­: allprojects { repositories { maven { // All of React Native (JS, Android binaries) is installed from npm url \"$rootDir/../node_modules/react-native/android\" } ... } ... } ç¡®ä¿ä¾èµ–è·¯å¾„çš„æ­£ç¡®ï¼ä»¥å…åœ¨ Android Studio è¿è¡Œ Gradle åŒæ­¥æ„å»ºæ—¶æŠ›å‡º â€œFailed to resolve: com.facebook.react:react-native:0.x.x\" å¼‚å¸¸ã€‚ 3.2 é…ç½®æƒé™ 3.2.1 åœ¨ AndroidManifest.xml æ¸…å•æ–‡ä»¶ä¸­å£°æ˜ç½‘ç»œæƒé™: 3.2.2 å¦‚æœéœ€è¦è®¿é—® DevSettingsActivity ç•Œé¢ï¼ˆå³å¼€å‘è€…èœå•ï¼‰ï¼Œåˆ™è¿˜éœ€è¦åœ¨ AndroidManifest.xml ä¸­å£°æ˜: 3.2.3 ä¿®æ”¹abiFilters ndk { abiFilters \"armeabi-v7a\", \"x86\" } åŸå›  react-nativeç”Ÿæˆaarçš„æºç åœ¨npm installå‘½ä»¤ä¸‹è½½ç”Ÿæˆçš„ '$é¡¹ç›®æ ¹ç›®å½•'\\node_modules\\react-native\\ReactAndroidä¸­ï¼› aarä¸­å…³äºå¯¹äºCPUé™åˆ¶åœ¨ '$é¡¹ç›®æ ¹ç›®å½•'\\node_modules\\react-native\\ReactAndroid\\src\\main\\jni\\Application.mk , åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ°ï¼š APP_BUILD_SCRIPT := Android.mk APP_ABI := armeabi-v7a x86 APP_PLATFORM := android-16 APP_MK_DIR := $(dir $(lastword $(MAKEFILE_LIST))) NDK_MODULE_PATH := $(APP_MK_DIR)$(HOST_DIRSEP)$(THIRD_PARTY_NDK_DIR)$(HOST_DIRSEP)$(REACT_COMMON_DIR)$(HOST_DIRSEP)$(APP_MK_DIR)first-party APP_STL := gnustl_shared # Make sure every shared lib includes a .note.gnu.build-id header APP_CFLAGS := -Wall -Werror APP_CPPFLAGS := -std=c++1y APP_LDFLAGS := -Wl,--build-id NDK_TOOLCHAIN_VERSION := 4.9 è¯´æ˜äº†CPUçš„ç±»å‹é™å®šåœ¨äº†armeabi-v7aå’Œx86ä¸Š 3.3 åŠ è½½ReactNativeè§†å›¾ æ–¹å¼ä¸€ã€ç»§æ‰¿ReactActivity éœ€è¦ä½¿ç”¨RNçš„é¡µé¢ç»§æ‰¿ReactActivity import com.facebook.react.ReactActivity; public class MainActivity extends ReactActivity { /** * Returns the name of the main component registered from JavaScript. * This is used to schedule rendering of the component. */ @Override protected String getMainComponentName() { return \"MyReactNativeApp\"; } } Applicationä¸­å®ç°ReactApplicationçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š @Override public ReactNativeHost getReactNativeHost() { return reactNativeHost; } private final ReactNativeHost reactNativeHost = new ReactNativeHost(this) { @Override public boolean getUseDeveloperSupport() { return BuildConfig.DEBUG; } @Override protected List getPackages() { return Arrays.asList( new MainReactPackage() ); } @Override protected String getJSMainModuleName(){ return \"index\"; } }; æ–¹å¼äºŒã€åœ¨å¸ƒå±€ä¸­åŠ å…¥ReactRootViewï¼Œé€šè¿‡ ReactInstanceManageråŠ è½½ç®¡ç†JS 1ã€é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º å¦‚æœä½ çš„åº”ç”¨ä¼šè¿è¡Œåœ¨ Android 6.0ï¼ˆAPI level 23ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œè¯·ç¡®ä¿ä½ åœ¨å¼€å‘ç‰ˆæœ¬ä¸­æœ‰æ‰“å¼€æ‚¬æµ®çª—(overlay)æƒé™ã€‚ä½ å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨Settings.canDrawOverlays(this);æ¥æ£€æŸ¥ã€‚ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸€æƒé™ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šæŠŠå¼€å‘ä¸­çš„æŠ¥é”™æ˜¾ç¤ºåœ¨æ‚¬æµ®çª—ä¸­ï¼ˆä»…åœ¨å¼€å‘é˜¶æ®µéœ€è¦ï¼‰ã€‚åœ¨ Android 6.0ï¼ˆAPI level 23ï¼‰ä¸­ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åŒæ„æˆæƒã€‚å…·ä½“è¯·æ±‚æˆæƒçš„åšæ³•æ˜¯åœ¨onCreate()ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚å…¶ä¸­OVERLAY_PERMISSION_REQ_CODEæ˜¯ç”¨äºå›ä¼ æˆæƒç»“æœçš„å­—æ®µã€‚ private final int OVERLAY_PERMISSION_REQ_CODE = 1; // ä»»å†™ä¸€ä¸ªå€¼ ... if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) { if (!Settings.canDrawOverlays(this)) { Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(\"package:\" + getPackageName())); startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE); } } é‡å†™onActivityResult()æ–¹æ³• @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { if (requestCode == OVERLAY_PERMISSION_REQ_CODE) { if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) { if (!Settings.canDrawOverlays(this)) { // SYSTEM_ALERT_WINDOW permission not granted } } } } æ¥ä¸‹æ¥æ·»åŠ ä¸€äº›åŸç”Ÿä»£ç æ¥å¯åŠ¨ React Native çš„è¿è¡Œæ—¶ç¯å¢ƒå¹¶è®©å®ƒå¼€å§‹æ¸²æŸ“ã€‚é¦–å…ˆéœ€è¦åœ¨ä¸€ä¸ªActivityä¸­åˆ›å»ºä¸€ä¸ªReactRootViewå¯¹è±¡ï¼Œç„¶ååœ¨è¿™ä¸ªå¯¹è±¡ä¹‹ä¸­å¯åŠ¨ React Native åº”ç”¨ï¼Œå¹¶å°†å®ƒè®¾ä¸ºç•Œé¢çš„ä¸»è§†å›¾ã€‚ å¦‚æœä½ æƒ³åœ¨å®‰å“ 5.0 ä»¥ä¸‹çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œè¯·ç”¨ com.android.support:appcompat åŒ…ä¸­çš„ AppCompatActivity ä»£æ›¿ Activity ã€‚ public class MyReactActivity extends Activity implements DefaultHardwareBackBtnHandler { private ReactRootView mReactRootView; private ReactInstanceManager mReactInstanceManager; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); mReactRootView = new ReactRootView(this); mReactInstanceManager = ReactInstanceManager.builder() .setApplication(getApplication()) .setBundleAssetName(\"index.android.bundle\") .setJSMainModulePath(\"index\") .addPackage(new MainReactPackage()) .setUseDeveloperSupport(BuildConfig.DEBUG) .setInitialLifecycleState(LifecycleState.RESUMED) .build(); // æ³¨æ„è¿™é‡Œçš„MyReactNativeAppå¿…é¡»å¯¹åº”â€œindex.jsâ€ä¸­çš„ // â€œAppRegistry.registerComponent()â€çš„ç¬¬ä¸€ä¸ªå‚æ•° mReactRootView.startReactApplication(mReactInstanceManager, \"MyReactNativeApp\", null); setContentView(mReactRootView); } @Override public void invokeDefaultOnBackPressed() { super.onBackPressed(); } @Override public void onBackPressed() { if (mReactInstanceManager != null) { mReactInstanceManager.onBackPressed(); } else { super.onBackPressed(); } } } ç”Ÿå‘½å‘¨æœŸ @Override protected void onPause() { super.onPause(); if (mReactInstanceManager != null) { mReactInstanceManager.onHostPause(this); } } @Override protected void onResume() { super.onResume(); if (mReactInstanceManager != null) { mReactInstanceManager.onHostResume(this, this); } } @Override protected void onDestroy() { super.onDestroy(); if (mReactInstanceManager != null) { mReactInstanceManager.onHostDestroy(this); } if (mReactRootView != null) { mReactRootView.unmountReactApplication(); } } å¼¹å‡ºRNçš„å¼€å‘è€…èœå• @Override public boolean onKeyUp(int keyCode, KeyEvent event) { if (keyCode == KeyEvent.KEYCODE_MENU && mReactInstanceManager != null) { mReactInstanceManager.showDevOptionsDialog(); return true; } return super.onKeyUp(keyCode, event); } 3.4 Androidç›¸å…³æŠ¥é”™å¤„ç† 1ã€soåº“å†²çª å¤„ç†ï¼šåœ¨appä¸‹çš„build.grideä¸­æ·»åŠ å¦‚ä¸‹è®¾ç½® packagingOptions { pickFirst 'lib/x86/libgnustl_shared.so' pickFirst 'lib/armeabi-v7a/libgnustl_shared.so' } Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:13:13 "},"content/ReactNative/ReactNativeä¸iOSçš„äº¤äº’.html":{"url":"content/ReactNative/ReactNativeä¸iOSçš„äº¤äº’.html","title":"ReactNativeä¸iOSçš„äº¤äº’","keywords":"","body":"ReactNativeä¸iOSçš„äº¤äº’ 1.1 RCTRootViewåˆå§‹åŒ–é—®é¢˜ /** * - Designated initializer - */ - (instancetype)initWithBridge:(RCTBridge *)bridge moduleName:(NSString *)moduleName initialProperties:(NSDictionary *)initialProperties NS_DESIGNATED_INITIALIZER; /** * - Convenience initializer - * A bridge will be created internally. * This initializer is intended to be used when the app has a single RCTRootView, * otherwise create an `RCTBridge` and pass it in via `initWithBridge:moduleName:` * to all the instances. */ - (instancetype)initWithBundleURL:(NSURL *)bundleURL moduleName:(NSString *)moduleName initialProperties:(NSDictionary *)initialProperties launchOptions:(NSDictionary *)launchOptions; 1ã€å½“Native APPå†…åªæœ‰ä¸€å¤„RNçš„å…¥å£æ—¶ï¼Œå¯ä»¥ä½¿ç”¨initWithBundleURLï¼Œå¦åˆ™çš„è¯å°±è¦ä½¿ç”¨initWithBridgeæ–¹æ³•ã€‚ 2ã€å› ä¸ºinitWithBundleURLä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªRCTBridgeï¼Œå½“æœ‰å¤šä¸ªRCTRootViewå…¥å£æ—¶ï¼Œå°±ä¼šå­˜åœ¨å¤šä¸ªRCTBridgeï¼Œå®¹æ˜“å¯¼è‡´Nativeç«¯ä¸RNäº¤äº’æ—¶å¤šæ¬¡å“åº”ï¼Œå‡ºç°BUGã€‚ 1.2 åˆ›å»ºè‡ªå®šä¹‰çš„RNBridgeManager ç”±äºAPPå†…æœ‰RNå¤šå…¥å£çš„éœ€æ±‚ï¼Œæ‰€ä»¥å…±ç”¨ä¸€ä¸ªRCTBridge RNBridgeManager.h #import #import NS_ASSUME_NONNULL_BEGIN @interface RNBridgeManager : RCTBridge /** RNBridgeManagerå•ä¾‹ */ + (instancetype)sharedManager; @end NS_ASSUME_NONNULL_END RNBridgeManager.m #import \"RNBridgeManager.h\" #import //devæ¨¡å¼ä¸‹:RCTBridge required dispatch_sync to load RCTDevLoadingView Error Fix #if RCT_DEV #import #endif /** è‡ªå®šä¹‰ç±»ï¼Œå®ç°RCTBridgeDelegate */ @interface BridgeHandle : NSObject @end @implementation BridgeHandle - (NSURL *)sourceURLForBridge:(RCTBridge *)bridge{ return [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@\"index\" fallbackResource:nil]; } @end @implementation RNBridgeManager + (instancetype)sharedManager{ static RNBridgeManager *manager; static dispatch_once_t onceToken; dispatch_once(&onceToken, ^{ manager = [[RNBridgeManager alloc] initWithDelegate:[[BridgeHandle alloc] init] launchOptions:nil]; #if RCT_DEV [manager moduleForClass:[RCTDevLoadingView class]]; #endif }); return manager; } @end 1.3 Nativeè¿›å…¥RNé¡µé¢ RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:[RNBridgeManager sharedManager] moduleName:@\"RNTest\" initialProperties:nil]; UIViewController *vc = [[UIViewController alloc] init]; vc.view = rootView; [self.navigationController pushViewController:vc animated:YES]; 1.4 RNè°ƒç”¨Nativeæ–¹æ³• åˆ›å»ºä¸€ä¸ªäº¤äº’çš„ç±»ï¼Œå®ç°åè®®ï¼› å›ºå®šæ ¼å¼ï¼šåœ¨.mçš„å®ç°ä¸­ï¼Œé¦–å…ˆå¯¼å‡ºæ¨¡å—åå­—RCT_EXPORT_MODULE();ï¼ŒRCT_EXPORT_MODULEæ¥å—å­—ç¬¦ä¸²ä½œä¸ºå…¶Moduleçš„åç§°ï¼Œå¦‚æœä¸è®¾ç½®åç§°çš„è¯é»˜è®¤å°±ä½¿ç”¨ç±»åä½œä¸ºModulçš„åç§°ï¼› ä½¿ç”¨RCT_EXPORT_METHODå¯¼å‡ºNativeçš„æ–¹æ³•ï¼› 1.4.1 æ¯”å¦‚æˆ‘ä»¬å¯¼å‡ºNativeç«¯çš„SVProgressHUDæç¤ºæ–¹æ³•ï¼š RNInterractModule.h #import #import NS_ASSUME_NONNULL_BEGIN @interface RNInterractModule : NSObject @end NS_ASSUME_NONNULL_END RNInterractModule.m import \"RNInterractModule.h\" #import \"Util.h\" #import @implementation RNInterractModule ////RCT_EXPORT_MODULEæ¥å—å­—ç¬¦ä¸²ä½œä¸ºå…¶Moduleçš„åç§°ï¼Œå¦‚æœä¸è®¾ç½®åç§°çš„è¯é»˜è®¤å°±ä½¿ç”¨ç±»åä½œä¸ºModulçš„åç§° RCT_EXPORT_MODULE(); //==============1ã€æç¤º============== RCT_EXPORT_METHOD(showInfo:(NSString *) info){ dispatch_sync(dispatch_get_main_queue(), ^{ [SVProgressHUD showInfoWithStatus:info]; }); } @end 1.4.2 RNç«¯è°ƒç”¨å¯¼å‡ºçš„showInfoæ–¹æ³•ï¼š æˆ‘ä»¬åœ¨RNç«¯æŠŠNativeçš„æ–¹æ³•é€šè¿‡ä¸€ä¸ªå…±åŒçš„utilså·¥å…·ç±»å¼•å…¥ï¼Œå¦‚ä¸‹ import { NativeModules } from 'react-native'; //å¯¼å‡ºNativeç«¯çš„æ–¹æ³• export const { showInfo} = NativeModules.RNInterractModule; å…·ä½“çš„RNé¡µé¢ä½¿ç”¨æ—¶ï¼š import { showInfo } from \"../utils\"; //é€šè¿‡Buttonç‚¹å‡»äº‹ä»¶è§¦å‘ showInfo('æˆ‘æ˜¯åŸç”Ÿç«¯çš„æç¤ºï¼')} /> è°ƒç”¨æ•ˆæœï¼š 1.4.3 RNå›è°ƒNative RNæ–‡æ¡£æ˜¾ç¤ºï¼Œç›®å‰iOSç«¯çš„å›è°ƒè¿˜å¤„äºå®éªŒé˜¶æ®µ æˆ‘ä»¬æä¾›ä¸€ä¸ªä¾‹å­æ¥æ¨¡æ‹Ÿï¼šç›®å‰çš„éœ€æ±‚æ˜¯åšé¢åŒ…ï¼ŒRNç«¯èƒ½æä¾›é¢ç²‰ï¼Œä½†æ˜¯ä¸ä¼šåšï¼ŒNativeç«¯æ˜¯æœ‰åšé¢åŒ…çš„åŠŸèƒ½ï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆæŠŠé¢ç²‰ï¼Œä¼ ç»™Nativeç«¯ï¼ŒNativeåŠ å·¥å¥½é¢åŒ…ä¹‹åï¼Œå†é€šè¿‡å›è°ƒå›ä¼ ç»™RNç«¯ã€‚ Nativeç«¯æä¾›æ–¹æ³• // æ¯”å¦‚è°ƒç”¨åŸç”Ÿçš„æ–¹æ³•å¤„ç†å›¾ç‰‡ã€è§†é¢‘ä¹‹ç±»çš„ï¼Œå¤„ç†å®Œæˆä¹‹åå†æŠŠç»“æœå›ä¼ åˆ°RNé¡µé¢é‡Œå» //TODOï¼ˆRNæ–‡æ¡£æ˜¾ç¤ºï¼Œç›®å‰iOSç«¯çš„å›è°ƒè¿˜å¤„äºå®éªŒé˜¶æ®µï¼‰ RCT_EXPORT_METHOD(patCake:(NSString *)flour successBlock:(RCTResponseSenderBlock)successBlock errorBlock:(RCTResponseErrorBlock)errorBlock){ __weak __typeof(self)weakSelf = self; dispatch_sync(dispatch_get_main_queue(), ^{ NSString *cake = [weakSelf patCake:flour]; //æ¨¡æ‹ŸæˆåŠŸã€å¤±è´¥çš„blockåˆ¤æ–­ if([flour isKindOfClass:[NSString class]]){ successBlock(@[@[cake]]);//æ­¤å¤„å‚æ•°éœ€è¦æ”¾åœ¨æ•°ç»„é‡Œé¢ }else{ NSError *error = [NSError errorWithDomain:@\"com.RNTest\" code:-1 userInfo:@{@\"message\":@\"ç±»å‹ä¸åŒ¹é…\"}]; errorBlock(error); } }); } //ä½¿ç”¨RNç«¯ä¼ é€’çš„å‚æ•°å­—ç¬¦ä¸²ï¼š\"\"ï¼Œè°ƒç”¨Nativeç«¯çš„åšé¢åŒ…æ–¹æ³•ï¼ŒåŠ å·¥æˆé¢åŒ…ï¼Œå†å›ä¼ ç»™RN - (NSString *)patCake:(NSString *)flour{ NSString * cake = [NSString stringWithFormat:@\"ä½¿ç”¨%@ï¼Œåšå¥½äº†ï¼šğŸ‚ğŸğŸğŸ°ğŸ°ğŸ°\",flour]; return cake; } RNç«¯è°ƒç”¨ï¼š //é¦–å…ˆå·¥å…·ç±»é‡Œå…ˆå¼•å…¥ export const { showInfo,patCake } = NativeModules.RNInterractModule; //å…·ä½“é¡µé¢ä½¿ç”¨ patCake('1æ–¤é¢ç²‰', (cake) => alert(cake), (error) => alert('å‡ºé”™äº†' + error.message))} /> è°ƒç”¨æ•ˆæœï¼š 1.4.4 ä½¿ç”¨Promiseå›è°ƒ Nativeç«¯æä¾›æ–¹æ³• RCT_EXPORT_METHOD(callNameTointroduction:(NSString *)name resolver:(RCTPromiseResolveBlock)resolve rejecter:(RCTPromiseRejectBlock) reject){ __weak __typeof(self)weakSelf = self; dispatch_sync(dispatch_get_main_queue(), ^{ if ([name isKindOfClass:NSString.class]) { resolve([weakSelf introduction:name]); }else{ NSError *error = [NSError errorWithDomain:@\"com.RNTest\" code:-1 userInfo:@{@\"message\":@\"ç±»å‹ä¸åŒ¹é…\"}]; reject(@\"class_error\",@\"Needs NSString Class\",error); } }); } - (NSString *)introduction:(NSString *)name{ return [NSString stringWithFormat:@\"æˆ‘çš„åå­—å«%@ï¼Œä»Šå¹´18å²ï¼Œå–œæ¬¢è¿åŠ¨ã€å¬æ­Œ...\",name]; } RNç«¯è°ƒç”¨ï¼š //é¦–å…ˆå·¥å…·ç±»é‡Œå…ˆå¼•å…¥ export const { showInfo,patCake, callNameTointroduction} = NativeModules.RNInterractModule; //å…·ä½“é¡µé¢ä½¿ç”¨ { try { let introduction = await callNameTointroduction('å°æ˜'); showInfo(introduction); } catch (e) { alert(e.message); } } } /> è°ƒç”¨æ•ˆæœï¼š 1.5 Nativeç«¯å‘é€é€šçŸ¥åˆ°RN Nativeç«¯ç»§æ‰¿RCTEventEmitter,å®ç°å‘é€RNé€šçŸ¥ç±»ï¼š RNNotificationManager.h #import #import #import NS_ASSUME_NONNULL_BEGIN @interface RNNotificationManager : RCTEventEmitter + (instancetype)sharedManager; @end NS_ASSUME_NONNULL_END RNNotificationManager.m #import \"RNNotificationManager.h\" @implementation RNNotificationManager { BOOL hasListeners; } + (instancetype)sharedManager{ static RNNotificationManager *manager; static dispatch_once_t onceToken; dispatch_once(&onceToken,^{ manager = [[self alloc] init]; }); return manager; } - (instancetype)init{ self = [super init]; if (self) { NSNotificationCenter *center = [NSNotificationCenter defaultCenter]; [center removeObserver:self]; [center addObserver:self selector:@selector(handleEventNotification:) name:@\"kRNNotification_Login\" object:nil]; [center addObserver:self selector:@selector(handleEventNotification:) name:@\"kRNNotification_Logout\" object:nil]; }; return self; } RCT_EXPORT_MODULE() - (NSArray *)supportedEvents{ return @[ @\"kRNNotification_Login\", @\"kRNNotification_Logout\" ]; } //ä¼˜åŒ–æ— ç›‘å¬å¤„ç†çš„äº‹ä»¶ //åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªç›‘å¬å‡½æ•°æ—¶è§¦å‘ - (void)startObserving{ //setup any upstream listenerse or background tasks as necessary hasListeners = YES; NSLog(@\"----------->startObserving\"); } //will be called when this mdules's last listener is removed,or on dealloc. - (void)stopObserving{ //remove upstream listeners,stop unnecessary background tasks. hasListeners = NO; NSLog(@\"----------->stopObserving\"); } + (BOOL)requiresMainQueueSetup{ return YES; } - (void)handleEventNotification:(NSNotification *)notification{ if (!hasListeners) { return; } NSString *name = notification.name; NSLog(@\"é€šçŸ¥åå­—-------->%@\",name); [self sendEventWithName:name body:notification.userInfo]; } @end RNç«¯æ³¨å†Œç›‘å¬ï¼š //utilså·¥å…·ç±»ä¸­å¯¼å‡º export const NativeEmitterModuleIOS = new NativeEventEmitter(NativeModules.RNNotificationManager); //å…·ä½“é¡µé¢ä½¿ç”¨ import { NativeEmitterModuleIOS } from \"../utils\"; export default class ActivityScene extends Component { constructor(props) { super(props); this.subscription = null; this.state = { loginInfo: 'å½“å‰æœªç™»å½•', }; } updateLoginInfoText = (reminder) => { this.setState({loginInfo: reminder.message}) }; //æ·»åŠ ç›‘å¬ componentWillMount() { this.subscription = NativeEmitterModuleIOS.addListener('kRNNotification_Login', this.updateLoginInfoText); } //ç§»é™¤ç›‘å¬ componentWillUnmount() { console.log('ActivityScene--------->', 'ç§»é™¤é€šçŸ¥'); this.subscription.remove(); } render() { return ( pushNative(RNEmitter)} /> {this.state.loginInfo} ); } } æ•ˆæœå±•ç¤ºï¼š 1.6 å®Œæ•´Demoï¼ˆåŒ…å«iOS & Android) RN-NativeTest Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:13:50 "},"content/ReactNative/ReactNativeä¸Androidçš„äº¤äº’.html":{"url":"content/ReactNative/ReactNativeä¸Androidçš„äº¤äº’.html","title":"ReactNativeä¸Androidçš„äº¤äº’","keywords":"","body":"ReactNativeä¸Androidçš„äº¤äº’ 1 RNè°ƒç”¨Nativeæ–¹æ³• 1ã€åˆ›å»ºäº¤äº’ç±»Moduleï¼Œç»§æ‰¿ReactContextBaseJavaModuleï¼› 2ã€åˆ›å»ºpackageï¼Œå®ç°ReactPackageçš„æ–¹æ³•ï¼Œæ·»åŠ æ­¥éª¤1åˆ›å»ºçš„äº¤äº’ç±»Moduleåˆ°packageå†…ï¼› 3ã€æ·»åŠ åˆ›å»ºçš„è‡ªå®šä¹‰packageåˆ°ReactNativeHostä¸­çš„getPackagesæ–¹æ³•ä¸­ï¼Œå‘ReactNativeæ³¨å†ŒåŸç”Ÿæ¨¡å—ï¼› 1.1 å¯¼å‡ºNativeç«¯çš„showInfoæç¤ºæ–¹æ³• Nativeç«¯å¯¼å‡º public class RNInterractModule extends ReactContextBaseJavaModule { private ReactContext mReactContext; public RNInterractModule(ReactApplicationContext reactContext) { super(reactContext); this.mReactContext = reactContext; } //å¯¼å‡ºçš„æ¨¡å—åå­— @Override public String getName() { return \"RNInterractModule\"; } //==============1ã€æç¤º============== @ReactMethod public void showInfo(String info){ Toast.makeText(getReactApplicationContext(),info,Toast.LENGTH_SHORT).show(); } } æ·»åŠ Moduleåˆ°è‡ªå®šä¹‰packageï¼š public class RNInterractPackage implements ReactPackage{ @Override public List createNativeModules(ReactApplicationContext reactContext) { List modules = new ArrayList<>(); modules.add(new RNInterractModule(reactContext)); return modules; } @Override public List createViewManagers(ReactApplicationContext reactContext) { return Collections.emptyList(); } } å†æ·»åŠ packageï¼ˆæ­¤å¤„å±•ç¤ºå®Œæ•´çš„MainApplicationæ–¹æ³•ï¼Œé‡å†™getPackages()æ–¹æ³•ä¸­æ·»åŠ ï¼‰ public class MainApplication extends Application implements ReactApplication{ @Override public ReactNativeHost getReactNativeHost() { return reactNativeHost; } private ReactNativeHost reactNativeHost = new ReactNativeHost(this) { @Override public boolean getUseDeveloperSupport() { return true; } @Override protected List getPackages() { return Arrays.asList( new MainReactPackage(), new RNInterractPackage() ); } @Override protected String getJSMainModuleName() { return \"index\"; } }; } 1.2 RNç«¯è°ƒç”¨å¯¼å‡ºçš„showInfoæ–¹æ³•ï¼š æˆ‘ä»¬åœ¨RNç«¯æŠŠNativeçš„æ–¹æ³•é€šè¿‡ä¸€ä¸ªå…±åŒçš„utilså·¥å…·ç±»å¼•å…¥ï¼Œå¦‚ä¸‹ import { NativeModules } from 'react-native'; //å¯¼å‡ºNativeç«¯çš„æ–¹æ³• export const { showInfo} = NativeModules.RNInterractModule; å…·ä½“çš„RNé¡µé¢ä½¿ç”¨æ—¶ï¼š import { showInfo } from \"../utils\"; //é€šè¿‡Buttonç‚¹å‡»äº‹ä»¶è§¦å‘ showInfo('æˆ‘æ˜¯åŸç”Ÿç«¯çš„æç¤ºï¼')} /> è°ƒç”¨æ•ˆæœï¼š 1.3 RNå›è°ƒNative æˆ‘ä»¬æä¾›ä¸€ä¸ªä¾‹å­æ¥æ¨¡æ‹Ÿï¼šç›®å‰çš„éœ€æ±‚æ˜¯åšé¢åŒ…ï¼ŒRNç«¯èƒ½æä¾›é¢ç²‰ï¼Œä½†æ˜¯ä¸ä¼šåšï¼ŒNativeç«¯æ˜¯æœ‰åšé¢åŒ…çš„åŠŸèƒ½ï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆæŠŠé¢ç²‰ï¼Œä¼ ç»™Nativeç«¯ï¼ŒNativeåŠ å·¥å¥½é¢åŒ…ä¹‹åï¼Œå†é€šè¿‡å›è°ƒå›ä¼ ç»™RNç«¯ã€‚ Nativeç«¯æä¾›æ–¹æ³• // æ¯”å¦‚è°ƒç”¨åŸç”Ÿçš„æ–¹æ³•å¤„ç†å›¾ç‰‡ã€è§†é¢‘ä¹‹ç±»çš„ï¼Œå¤„ç†å®Œæˆä¹‹åå†æŠŠç»“æœå›ä¼ åˆ°RNé¡µé¢é‡Œå» //TODO: è¯·åŠ¡å¿…æ³¨æ„ callback å¹¶éåœ¨å¯¹åº”çš„åŸç”Ÿå‡½æ•°è¿”å›åç«‹å³è¢«æ‰§è¡Œâ€”â€”æ³¨æ„è·¨è¯­è¨€é€šè®¯æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¼šé€šè¿‡æ¶ˆæ¯å¾ªç¯æ¥è¿›è¡Œã€‚ @ReactMethod public void patCake(String flour, Callback successCallback,Callback errorCallback){ try{ //æ¨¡æ‹Ÿå¼‚å¸¸ï¼Œèµ°reject if (!flour.getClass().equals(String.class)){ throw new Exception(\"å‡ºé”™äº†ï¼Œå‚æ•°ç±»å‹ä¸åŒ¹é…\"); } successCallback.invoke(patCakeUse(flour)); }catch (Exception e){ errorCallback.invoke(e.getMessage()); } } //ä½¿ç”¨RNç«¯ä¼ é€’çš„å‚æ•°å­—ç¬¦ä¸²ï¼š\"\"ï¼Œè°ƒç”¨Nativeç«¯çš„åšé¢åŒ…æ–¹æ³•ï¼ŒåŠ å·¥æˆé¢åŒ…ï¼Œå†å›ä¼ ç»™RN private String patCakeUse(String flour){ String cake = String.format(\"ä½¿ç”¨%sï¼Œåšå¥½äº†:\\uD83C\\uDF82\\uD83C\\uDF5E\\uD83C\\uDF5E\\uD83C\\uDF70\\uD83C\\uDF70\\uD83C\\uDF70\",flour); return cake; } RNç«¯è°ƒç”¨ï¼š //é¦–å…ˆå·¥å…·ç±»é‡Œå…ˆå¼•å…¥ export const { showInfo,patCake } = NativeModules.RNInterractModule; //å…·ä½“é¡µé¢ä½¿ç”¨ patCake('1æ–¤é¢ç²‰', (cake) => alert(cake), (error) => alert('å‡ºé”™äº†' + error.message))} /> è°ƒç”¨æ•ˆæœï¼š 1.4 ä½¿ç”¨Promiseå›è°ƒ Nativeç«¯æä¾›æ–¹æ³• @ReactMethod public void callNameTointroduction(String name, Promise promise){ try{ //æ¨¡æ‹Ÿå¼‚å¸¸ï¼Œèµ°reject if (!name.getClass().equals(String.class)){ throw new Exception(\"å‡ºé”™äº†ï¼Œå‚æ•°ç±»å‹ä¸åŒ¹é…\"); } promise.resolve(introduction(name)); }catch (Exception e){ promise.reject(e); } } private String introduction(String name){ return String.format(\"æˆ‘çš„åå­—å«%sï¼Œä»Šå¹´18å²ï¼Œå–œæ¬¢è¿åŠ¨ã€å¬æ­Œ...\",name); } RNç«¯è°ƒç”¨ï¼š //é¦–å…ˆå·¥å…·ç±»é‡Œå…ˆå¼•å…¥ export const { showInfo,patCake, callNameTointroduction} = NativeModules.RNInterractModule; //å…·ä½“é¡µé¢ä½¿ç”¨ { try { let introduction = await callNameTointroduction('å°æ˜'); showInfo(introduction); } catch (e) { alert(e.message); } } } /> è°ƒç”¨æ•ˆæœï¼š 2 Nativeå‘é€é€šçŸ¥åˆ°RN å®ç°è‡ªå®šä¹‰çš„å‘é€RNæ¶ˆæ¯ç±»RNNotificationManager public class RNNotificationManager { //å®šä¹‰ä¸Šä¸‹æ–‡ public static ReactContext mContext; //å‘é€äº‹ä»¶åˆ°RNç«¯ public static void sendRNEvent(String eventName, @Nullable WritableMap params){ mContext.getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class).emit(eventName,params); } } æˆ‘ä»¬ä½¿ç”¨é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•ï¼ŒmContextåœ¨è‡ªå®šä¹‰çš„RNInterractModuleä¸ºå…¶èµ‹å€¼ï¼š public class RNInterractModule extends ReactContextBaseJavaModule { private ReactContext mReactContext; public RNInterractModule(ReactApplicationContext reactContext) { super(reactContext); this.mReactContext = reactContext; //èµ‹å€¼ RNNotificationManager.mContext = reactContext; } } ç„¶åå°±å¯ä»¥åœ¨éœ€è¦ç»™RNå‘é€æ¶ˆæ¯çš„åœ°æ–¹è°ƒç”¨ï¼š button.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { WritableMap params = Arguments.createMap(); params.putString(\"message\",\"ç™»å½•æˆåŠŸ\"); RNNotificationManager.sendRNEvent(\"kRNNotification_Login\",params); } }); RNç«¯æ¥æ”¶æ¶ˆæ¯ï¼š //æ·»åŠ ç›‘å¬ componentWillMount() { this.subscription = DeviceEventEmitter.addListener('kRNNotification_Login',this.updateLoginInfoText) } //ç§»é™¤ç›‘å¬ componentWillUnmount() { console.log('ActivityScene--------->', 'ç§»é™¤é€šçŸ¥'); this.subscription.remove(); } è°ƒç”¨å±•ç¤ºï¼š 3 Nativeå‘RNè‡ªå®šä¹‰ä¼ å‚ åœ¨ç»§æ‰¿ReactActivityçš„RNå…¥å£Activityä¸­ï¼Œè‡ªå®šä¹‰CustomDelegateï¼ˆç»§æ‰¿ReactActivityDelegateï¼‰ï¼› ç„¶åé‡å†™CustomDelegateçš„getLaunchOptions()æ–¹æ³•ï¼Œæ­¤å¤„çš„Bundleå³ä¸ºè¦ä¼ é€’çš„å‚æ•°Bundleï¼› å†é‡å†™RNå…¥å£Activityçš„createReactActivityDelegate()æ–¹æ³•ï¼Œè¿”å›CustomDelegateå®ä¾‹ï¼› RNç«¯å‚æ•°æ¥æ”¶é€šè¿‡å…¥å£é¡µé¢çš„this.propsè·å–ï¼Œå…·ä½“å¯å‚è€ƒdemo ç¤ºä¾‹ï¼š public class ReactNativeActivity extends ReactActivity { private String strData; @Override protected void onCreate(Bundle savedInstanceState) { Intent intent = getIntent(); if (intent != null){ strData = intent.getStringExtra(\"msgKey\"); } super.onCreate(savedInstanceState); } @Nullable @Override protected String getMainComponentName() { return \"RNTest\"; } @Override protected ReactActivityDelegate createReactActivityDelegate() { return new CustomDelegate(this,getMainComponentName()); } //è‡ªå®šä¹‰ReactDelegate class CustomDelegate extends ReactActivityDelegate { private CustomDelegate(Activity activity, @Nullable String mainComponentName) { super(activity, mainComponentName); } @Nullable @Override protected Bundle getLaunchOptions() { Bundle bundle = new Bundle(); bundle.putString(\"msg\",strData); return bundle; } } } 4 å®Œæ•´Demoï¼ˆåŒ…å«iOS & Android) RN-NativeTest Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:13:33 "},"content/ReactNative/ReactNativeè¸©å‘è®°å½•.html":{"url":"content/ReactNative/ReactNativeè¸©å‘è®°å½•.html","title":"ReactNativeè¸©å‘è®°å½•","keywords":"","body":"ReactNativeè¸©å‘è®°å½• 1ã€The SDK Build Tools revision (23.0.1) is too low for project ':react-native-extra-dimensions-android'. Minimum required is 25.0.0 è§£å†³ï¼šåœ¨node_modules/react-native-extra-dimensions-android/androidï¼Œä¿®æ”¹build.gradleï¼ˆå…¶ä»–åº“ç±»ä¼¼é—®é¢˜ï¼Œå¯å‚è€ƒè§£å†³ï¼‰ï¼š apply plugin: 'com.android.library' android { compileSdkVersion 26 buildToolsVersion \"26.0.3\" defaultConfig { minSdkVersion 16 targetSdkVersion 26 versionCode 1 versionName \"1.0\" ndk { abiFilters \"armeabi-v7a\", \"x86\" } } } dependencies { compile 'com.facebook.react:react-native:+' } 2ã€undefined is not an object (evaluating 'NativeModules.ExtraDimensions[dim]') è§£å†³ï¼šæ‰§è¡Œreact-native link æŸå·²å®‰è£…çš„å…·ä½“åº“å æ³¨æ„ä¸€äº›è€çš„æ•™ç¨‹å’Œæ–‡æ¡£å¯èƒ½ä¼šæåˆ°rnpm linkå‘½ä»¤ï¼Œæ­¤å‘½ä»¤å·²è¿‡æœŸä¸å†ä½¿ç”¨ 3ã€NetInfo's BUG issueï¼šiOS: NetInfo.isConnected returns always false fixï¼Ÿ fix RCTNetInfo first time connection status è§£å†³ï¼šï¼ˆæ›²çº¿æ•‘å›½ï¼‰ //è®¾å¤‡æ˜¯å¦è”ç½‘ if (Platform.OS === 'ios') { NetInfo.isConnected.addEventListener('connectionChange', (isConnected) => { console.log('networkï¼š',isConnected ? 'online' : 'offline'); } ); } else { NetInfo.isConnected.fetch().then(isConnected => { console.log('networkï¼š',isConnected ? 'online' : 'offline'); }); } 4ã€ Unable to connect with remote debugger Dev Tools launch to 10.0.2.2 instead of localhost !--![](https://ws1.sinaimg.cn/large/72ebc0edgy1g1vddukjk0j20co0midhf.jpg)-- è§£å†³ï¼š In my case the issue was that the emulator was making a request to: http://10.0.2.2:8081/debugger-ui instead of: http://localhost:8081/debugger-ui > Press Cmd + M on emulator screen Go to Dev settings > Debug server host & port for device Set localhost:8081 Rerun the android app: react-native run-android 5ã€ Required dispatch_sync to load constants for xxxxx. This may lead to deadlocks è§£å†³ï¼šæ¨¡æ‹Ÿå™¨æ¥å…¥æµè§ˆå™¨è°ƒè¯•æ‰ä¼šå‡ºç°ï¼Œå¦‚æœä¸é€‚ç”¨æµè§ˆå™¨è°ƒè¯•ï¼Œå°±ä¸ä¼šå¼¹å‡ºè¿™ä¸ªè­¦å‘Šã€‚ 6ã€React Nativeä¹‹Textä¸­æ–‡å­—å¦‚ä½•å±…ä¸­ è§£å†³ï¼š æ–¹æ¡ˆä¸€ è®¾ç½® lineHeight, å¦‚æœ Text çš„ height ä¸º 100ï¼Œè®¾ç½® lineHeight ä¸º 100, æ–‡æœ¬å°±å‚ç›´å±…ä¸­äº†ã€‚ï¼ˆå®Œç¾ï¼‰ æ–¹æ¡ˆäºŒ ç»™ Text è®¾ç½® paddingï¼Œè¿™ä¸ªå°±éœ€è¦è®¡ç®—äº†ï¼Œæ¯”å¦‚ Text é«˜åº¦æ˜¯ 100ï¼Œ fontSize æ˜¯ 20ï¼Œé‚£å¯ä»¥è®¾ç½® paddingTop ä¸º 40ï¼ˆfontSize ä¸º 20ï¼Œé»˜è®¤æ˜¯ 20 é«˜åº¦ï¼‰ æ–¹æ¡ˆä¸‰ åœ¨ Text å¤–éƒ¨åœ¨åµŒå¥—ä¸€ä¸ª Viewï¼Œ æ”¹å˜ View çš„é«˜åº¦ï¼Œåœ¨æ¥è°ƒæ•´ Text çš„å¸ƒå±€ï¼Œè¿™ç§æ–¹æ¡ˆéº»çƒ¦ï¼Œå¤šå‡ºä¸€ä¸ªå±‚çº§ï¼Œä¼šå½±å“æ€§èƒ½çš„ã€‚ æ€»ç»“ å¦‚æœ lineHeight åœ¨ android ä¸Šé¢ä¸èµ·ä½œç”¨ï¼ˆå¯èƒ½æ˜¯bugï¼‰å¯ä»¥ä½¿ç”¨ä¸‹é¢æ€»ç»“çš„æ–¹æ¡ˆï¼š import {StyleSheet,Platform} from 'react-native'; TextStyle:{ height:36, width:100, textAlign:'center', alignItems:'center', justifyContent:'center', textAlignVertical:'center', ...Platform.select({ ios:{ lineHeight:36, }, android:{ } }), } 6ã€ react-navigationï¼šundefined is not an object (evaluating _this.props.navigation) è§£å†³ï¼š //åœ¨static navigationOptionsè®¾ç½®ä¸­ æ— æ³•è·å–this.propsï¼Œå¯¼è‡´é”™è¯¯ //æ­£ç¡®æ–¹å¼ static navigationOptions = ({navigation}) => ({ headerTitle: 'å…¨éƒ¨åˆ†ç±»', headerRight: ( navigation.push('Search')} > ) }); 7ã€ Android P ï¼šCould not connect to development server. Googleè¡¨ç¤ºï¼Œä¸ºä¿è¯ç”¨æˆ·æ•°æ®å’Œè®¾å¤‡çš„å®‰å…¨ï¼Œé’ˆå¯¹ä¸‹ä¸€ä»£ Android ç³»ç»Ÿ(Android P) çš„åº”ç”¨ç¨‹åºï¼Œå°†è¦æ±‚é»˜è®¤ä½¿ç”¨åŠ å¯†è¿æ¥ï¼Œè¿™æ„å‘³ç€ Android P å°†ç¦æ­¢ App ä½¿ç”¨æ‰€æœ‰æœªåŠ å¯†çš„è¿æ¥ï¼Œå› æ­¤è¿è¡Œ Android P ç³»ç»Ÿçš„å®‰å“è®¾å¤‡æ— è®ºæ˜¯æ¥æ”¶æˆ–è€…å‘é€æµé‡ï¼Œæœªæ¥éƒ½ä¸èƒ½æ˜ç ä¼ è¾“ï¼Œéœ€è¦ä½¿ç”¨ä¸‹ä¸€ä»£(Transport Layer Security)ä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œè€Œ Android Nougat å’Œ Oreo åˆ™ä¸å—å½±å“ã€‚ å› æ­¤åœ¨Android P ä½¿ç”¨HttpUrlConnectionè¿›è¡Œhttpè¯·æ±‚ä¼šå‡ºç°ä»¥ä¸‹å¼‚å¸¸ W/System.err: java.io.IOException: Cleartext HTTP traffic to **** not permitted ä½¿ç”¨OKHttpè¯·æ±‚åˆ™å‡ºç° java.net.UnknownServiceException: CLEARTEXT communication ** not permitted by network security policy è§£å†³ï¼š åœ¨ res ä¸‹æ–°å¢ä¸€ä¸ª xml ç›®å½•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºï¼šnetwork_security_config.xml æ–‡ä»¶ï¼ˆåå­—è‡ªå®šï¼‰ ï¼Œå†…å®¹å¦‚ä¸‹ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯å…è®¸å¼€å¯httpè¯·æ±‚ ç„¶ååœ¨APPçš„AndroidManifest.xmlæ–‡ä»¶ä¸‹çš„applicationæ ‡ç­¾å¢åŠ ä»¥ä¸‹å±æ€§ 8ã€ ReactNative mutex.hä¸­config.hæŠ¥é”™ âŒ è§£å†³ï¼š ç»ˆç«¯è¿›å…¥node_modulesæ–‡ä»¶å¤¹æ‰€åœ¨ç›®å½•ï¼Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤è¡Œï¼Œ cd node_modules/react-native/third-party/glog-0.3.4 ../../scripts/ios-configure-glog.sh Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:12:24 "},"content/ReactNative/ReactNativeè§¦æ‘¸äº‹ä»¶.html":{"url":"content/ReactNative/ReactNativeè§¦æ‘¸äº‹ä»¶.html","title":"ReactNativeè§¦æ‘¸äº‹ä»¶","keywords":"","body":"ReactNativeè§¦æ‘¸äº‹ä»¶ 1ã€åŸºæœ¬çš„è§¦æ‘¸ç»„ä»¶ Text Button Touchableç³»åˆ—ç»„ä»¶ TouchableHighlight TouchableNativeFeedback TouchableOpacity TouchableWithoutFeedback è¿™äº›ç»„ä»¶éƒ½æ”¯æŒonPressInã€onPressOutã€onPressã€onLongPressæ–¹æ³•ã€‚ ä½¿ç”¨TouchableOpacityç¤ºä¾‹ï¼š console.log(\"onPressIn\")} onPressOut={() => console.log(\"onPressOut\")} onPress={() => console.log(\"onPress\")} onLongPress={() => console.log(\"onLongPress\")} > Touch*æ‰‹åŠ¿çš„åŒºåˆ«ï¼š 1ã€TouchableHighlightï¼Œé™¤äº†ç»™å†…éƒ¨å…ƒç´ å¢åŠ ç»‘å®šäº‹ä»¶ä¹‹å¤–ï¼Œè¿˜è´Ÿè´£ç»™å†…éƒ¨å…ƒç´ å¢åŠ ç‚¹å‡»çš„æ•ˆæœï¼› 2ã€TouchableNativeFeedbackåªèƒ½ç”¨åœ¨å®‰å“å¹³å°ä¸Šï¼Œå®ƒå¯ä»¥é’ˆå¯¹ç‚¹å‡»åœ¨ç‚¹å‡»åŒºåŸŸä¸­æ˜¾ç¤ºä¸åŒçš„æ•ˆæœï¼Œä¾‹å¦‚å®‰å“ç³»ç»Ÿä¸­çš„ç‚¹å‡»æ³¢çº¹æ•ˆæœï¼› 3ã€TouchableOpacityè¿™ä¸ªç»„ä»¶ç”¨æ¥ç»™ä¸ºå†…éƒ¨å…ƒç´ åœ¨ç‚¹å‡»æ—¶æ·»åŠ é€æ˜åº¦ï¼› 4ã€TouchableWithoutFeedbackè¿™ä¸ªç»„ä»¶åªå“åº”touchæ‰‹åŠ¿ï¼Œä¸å¢åŠ ç‚¹å‡»æ€ï¼Œä¸æ¨èä½¿ç”¨ã€‚ 2ã€æ‰‹åŠ¿å“åº”ç³»ç»Ÿ 2.1å•ç»„ä»¶è§¦æ‘¸äº‹ä»¶å¤„ç† RNçš„ç»„ä»¶é»˜è®¤ä¸è¿›è¡Œå¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªæ™®é€šçš„Viewç»„ä»¶å˜æˆä¸€ä¸ªèƒ½å“åº”æ‰‹åŠ¿æ“ä½œçš„responderï¼Œåªéœ€è¦åœ¨propsä¸Šè®¾ç½®å¦‚ä¸‹æ–¹æ³•ï¼š View.props.onStartShouldSetResponder View.props.onMoveShouldSetResponder View.props.onResponderGrant View.props.onResponderReject View.props.onResponderStart View.props.onResponderMove View.props.onResponderEnd View.props.onResponderRelease View.props.onResponderTerminationRequest View.props.onResponderTerminate React Nativeäº‹ä»¶å“åº”çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š 1ã€å¦‚æœç»„ä»¶è¦è¿›è¡Œè§¦æ‘¸äº‹ä»¶å¤„ç†ï¼Œé¦–å…ˆè¦ç”³è¯·æˆä¸ºäº‹ä»¶å“åº”è€…ï¼Œé€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªå±æ€§è¯¢é—®ç»„ä»¶æ˜¯å¦æˆä¸ºå“åº”è€…ï¼š View.props.onStartShouldSetResponder: (evt) => trueï¼Œåœ¨è§¦æ‘¸å¼€å§‹çš„æ—¶å€™ï¼ˆTouchDownï¼‰ï¼ŒReactNativeä¼šå…ˆè°ƒç”¨æ­¤å‡½æ•°ï¼Œè¯¢é—®ç»„ä»¶æ˜¯å¦éœ€è¦æˆä¸ºäº‹ä»¶çš„å“åº”è€…ï¼› View.props.onMoveShouldSetResponder: (evt) => trueï¼Œå¦‚æœViewä¸æ˜¯å“åº”è€…ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸€ä¸ªè§¦æ‘¸ç‚¹å¼€å§‹ç§»åŠ¨ï¼› 2ã€å› ä¸ºåŒä¸€æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªäº‹ä»¶å¤„ç†å“åº”è€…ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ¯ä¸ªç»„ä»¶éƒ½èƒ½ç”³è¯·æˆåŠŸï¼ŒRNé€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªå›è°ƒå‘ŠçŸ¥ç”³è¯·ç»“æœï¼š View.props.onResponderGrant: (evt) => {}ï¼šè¡¨ç¤ºç”³è¯·æˆåŠŸï¼Œç»„ä»¶æˆä¸ºäº†äº‹ä»¶å¤„ç†å“åº”è€…ï¼Œè¿™æ—¶ç»„ä»¶å°±å¼€å§‹æ¥æ”¶ååºçš„è§¦æ‘¸äº‹ä»¶è¾“å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ—¶å¼€å§‹ï¼Œç»„ä»¶è¿›å…¥äº†æ¿€æ´»çŠ¶æ€ï¼Œå¹¶è¿›è¡Œä¸€äº›äº‹ä»¶å¤„ç†æˆ–è€…æ‰‹åŠ¿è¯†åˆ«çš„åˆå§‹åŒ–ã€‚ View.props.onResponderReject: (evt) => {}ï¼šè¡¨ç¤ºç”³è¯·å¤±è´¥äº†ï¼Œè¿™æ„å‘³è€…å…¶ä»–ç»„ä»¶æ­£åœ¨è¿›è¡Œäº‹ä»¶å¤„ç†ï¼Œå¹¶ä¸”å®ƒä¸æƒ³æ”¾å¼ƒäº‹ä»¶å¤„ç†ï¼Œæ‰€ä»¥ä½ çš„ç”³è¯·è¢«æ‹’ç»äº†ï¼Œåç»­è¾“å…¥äº‹ä»¶ä¸ä¼šä¼ é€’ç»™æœ¬ç»„ä»¶è¿›è¡Œå¤„ç†ã€‚ 3ã€å¦‚æœç»„ä»¶ç”³è¯·æˆä¸ºäº†å“åº”è€…ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹å›è°ƒæ–¹æ³•ï¼š View.props.onResponderStart: (evt) => {}ï¼šè¡¨ç¤ºæ‰‹æŒ‡æŒ‰ä¸‹æ—¶ï¼ŒæˆåŠŸç”³è¯·ä¸ºäº‹ä»¶å“åº”è€…çš„å›è°ƒï¼› View.props.onResponderMove: (evt) => {}ï¼šè¡¨ç¤ºè§¦æ‘¸æ‰‹æŒ‡ç§»åŠ¨çš„äº‹ä»¶ï¼Œè¿™ä¸ªå›è°ƒå¯èƒ½éå¸¸é¢‘ç¹ï¼Œæ‰€ä»¥è¿™ä¸ªå›è°ƒå‡½æ•°çš„å†…å®¹éœ€è¦å°½é‡ç®€å•ï¼› View.props.onResponderEnd: (evt) => {}ï¼šè¡¨ç¤ºç»„ä»¶ç»“æŸäº‹ä»¶å“åº”ã€‚ View.props.onResponderRelease: (evt) => {}ï¼šè¡¨ç¤ºè§¦æ‘¸å®Œæˆï¼ˆtouchUpï¼‰çš„æ—¶å€™çš„å›è°ƒï¼Œè¡¨ç¤ºç”¨æˆ·å®Œæˆäº†æœ¬æ¬¡çš„è§¦æ‘¸äº¤äº’ï¼Œè¿™é‡Œåº”è¯¥å®Œæˆæ‰‹åŠ¿è¯†åˆ«çš„å¤„ç†ï¼Œè¿™ä»¥åï¼Œç»„ä»¶ä¸å†æ˜¯äº‹ä»¶å“åº”è€…ï¼Œç»„ä»¶å–æ¶ˆæ¿€æ´»ã€‚ 4ã€å½“ç»„ä»¶å¤„äºå“åº”è€…æœŸé—´ï¼Œå¹¶ä¸”å…¶ä»–ç»„ä»¶ä¹Ÿåœ¨ç”³è¯·è§¦æ‘¸äº‹ä»¶å¤„ç†æ—¶ï¼ŒRNä¼šè¯¢é—®æ˜¯å¦å¯ä»¥é‡Šæ”¾å“åº”è®©ç»™å…¶ä»–ç»„ä»¶ï¼š View.props.onResponderTerminationRequest: (evt) => bool 5ã€æœ€ç»ˆé‡Šæ”¾å“åº”è€…çš„è§’è‰²åï¼Œå›è°ƒonResponderTerminateï¼Œé€šçŸ¥ç»„ä»¶äº‹ä»¶å“åº”å¤„ç†è¢«ç»ˆæ­¢ï¼š å¯èƒ½æ˜¯ç”±äºå…¶ä»– View é€šè¿‡onResponderTerminationRequestè¯·æ±‚çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿå¼ºåˆ¶å¤ºæƒï¼ˆæ¯”å¦‚ iOS ä¸Šçš„æ§åˆ¶ä¸­å¿ƒæˆ–æ˜¯é€šçŸ¥ä¸­å¿ƒï¼‰ View.props.onResponderTerminate: (evt) => {} ç¤ºä¾‹ä»£ç ï¼š import React, {Component} from 'react'; import { StyleSheet, View, Button, Text } from 'react-native'; export default class GestureScreen extends Component { constructor(props) { super(props); this.state = { backgroundColor: 'blue' }; this.gestureHandlers = { onStartShouldSetResponder: () => true, onMoveShouldSetResponder: () => true, onResponderStart:() => { console.log('onResponderStart') }, onResponderGrant: () => { console.log('onResponderGrant'); this.setState({backgroundColor: 'green'}) }, onResponderMove: () => { console.log('onResponderMove') }, onResponderEnd:() => { console.log('onResponderEnd') }, onResponderRelease: () => { console.log('onResponderRelease') this.setState({backgroundColor: 'blue'}) }, onResponderTerminationRequest: () => { console.log('onResponderTerminationRequest'); return true; }, onResponderTerminate: (evt) => { console.log('onResponderTerminate') } }; } render() { return ( View 1 ); } } const styles = StyleSheet.create({ container: { flex: 1, alignItems: 'center', justifyContent: 'center', backgroundColor:'rgb(236,236,236)' }, gesview:{ width:160, height:80, borderRadius:20, borderColor:'red', borderWidth:2, alignItems:'center', justifyContent:'center', }, text:{ color:'white', fontSize:20, fontWeight:'bold' } }); æ‰§è¡Œè¿™æ®µä»£ç ï¼ŒresponderGrantå“åº”ï¼Œä¸­é—´ç»¿è‰²çš„Viewå˜ä¸ºè“è‰²,responderReleaseå“åº”ï¼Œé‡æ–°å˜ä¸ºç»¿è‰²; ç‚¹å‡»ä¸€æ¬¡Viewï¼Œç„¶åç¦»å¼€å±å¹•ï¼Œè°ƒç”¨é¡ºåºï¼š 1ã€onResponderGrant 2ã€onResponderStart 3ã€onResponderEnd 4ã€onResponderRelease 2.2åµŒå¥—ç»„ä»¶è§¦æ‘¸äº‹ä»¶å¤„ç† å¦‚æœçˆ¶View Aä¸­åµŒå¥—æœ‰ä¸€ä¸ªå­ç»„ä»¶View Bï¼Œ æ­£å¸¸çš„æƒ…å†µï¼Œå½“ç”¨æˆ·è§¦æ‘¸View Bæ—¶ï¼Œå­ç»„ä»¶ä¼šæ˜¾ç¤ºï¼šB å­ç»„ä»¶ è¢«ç‚¹å‡»ï¼Œçˆ¶Viewåˆ™ä¸ä¼šæœ‰ååº”ï¼›å½“ç‚¹å‡»View Aæ—¶ï¼ŒView Aä¼šæ˜¾ç¤ºï¼šA ç»„ä»¶ è¢«ç‚¹å‡»ï¼Œå­View Bæ²¡æœ‰ååº”ï¼Œä»¥ä¿è¯è§†å›¾éƒ½èƒ½å¤Ÿæ­£å¸¸å¤„ç†è§¦æ‘¸äº‹ä»¶ã€‚ ç¤ºä¾‹ import React, {Component} from 'react'; import { StyleSheet, View, Button, Text } from 'react-native'; export default class GestureScreen extends Component { constructor(props) { super(props); this.state = { text1: 'A çˆ¶ç»„ä»¶', text2:'B å­ç»„ä»¶' }; this.gestureHandlers = { onStartShouldSetResponder: () => true, onMoveShouldSetResponder: () => true, onResponderStart: () => { console.log('onResponderStart') }, onResponderGrant: () => { console.log('onResponderGrant'); this.setState({text1: 'A çˆ¶ç»„ä»¶ è¢«ç‚¹å‡»'}) }, onResponderMove: () => { console.log('onResponderMove') }, onResponderEnd: () => { console.log('onResponderEnd') }, onResponderRelease: () => { console.log('onResponderRelease') this.setState({text1:'A çˆ¶ç»„ä»¶'}) }, }; this.gestureHandlers2 = { onStartShouldSetResponder: () => true, onMoveShouldSetResponder: () => true, onResponderStart: () => { console.log('onResponderStart---->2') }, onResponderGrant: () => { console.log('onResponderGrant---->2'); this.setState({text2: 'B å­ç»„ä»¶ è¢«ç‚¹å‡»'}) }, onResponderMove: () => { console.log('onResponderMove---->2') }, onResponderEnd: () => { console.log('onResponderEnd---->2') }, onResponderRelease: () => { console.log('onResponderRelease---->2') this.setState({text2: 'B å­ç»„ä»¶'}) }, }; } render() { return ( {this.state.text1} {this.state.text2} ); } } const styles = StyleSheet.create({ container: { flex: 1, alignItems: 'center', justifyContent: 'center', backgroundColor: 'rgb(236,236,236)' }, gesview: { width: 200, height: 200, backgroundColor:'#B34D76', }, text: { color: 'white', fontSize: 20, fontWeight: 'bold' }, sonview: { width:100, height:100, backgroundColor:'#33AECC', alignSelf:'center', marginTop:20, } }); ä½†æ˜¯ï¼Œåœ¨ RN ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨å†’æ³¡æœºåˆ¶ï¼Œå“åº”æœ€æ·±çš„ç»„ä»¶æœ€å…ˆå¼€å§‹å“åº”ã€‚æ‰€ä»¥å½“å¤šä¸ª View åŒæ—¶åœ¨*ShouldSetResponderä¸­è¿”å› true æ—¶ï¼Œæœ€åº•å±‚çš„ View å°†æœ€å…ˆå“åº”ã€‚ RN æä¾›äº†ä¸€ä¸ªåŠ«æŒæœºåˆ¶ï¼Œåœ¨è§¦æ‘¸äº‹ä»¶å¾€ä¸‹ä¼ é€’çš„æ—¶å€™ï¼Œå…ˆè¯¢é—®çˆ¶ç»„ä»¶æ˜¯å¦éœ€è¦åŠ«æŒï¼Œä¸ç»™å­ç»„ä»¶ä¼ é€’äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹ä¸¤ä¸ªå›è°ƒï¼š View.props.onStartShouldSetResponderCapture: (evt) => true View.props.onMoveShouldSetResponderCapture: (evt) => true æˆ‘ä»¬è®¾ç½®View Açš„ä»¥ä¸Šä¸¤ä¸ªå±æ€§ä¸ºtrueæ—¶ï¼Œæ•ˆæœï¼š å¯è§ç‚¹å‡»Bå­Viewæ—¶ï¼ŒAçˆ¶Viewæ˜¾ç¤ºè¢«ç‚¹å‡»ï¼Œç‚¹å‡»A Viewï¼Œä¾ç„¶æ˜¯Aè¢«ç‚¹å‡»ï¼›Bçš„äº‹ä»¶è¢«çˆ¶Viewæ‹¦æˆªå¹¶å¤„ç†ï¼Œå¹¶ä¸”ä¸å†ç»§ç»­ä¼ é€’ã€‚ 2.3äº‹ä»¶æ•°æ®ç»“æ„ è§¦æ‘¸äº‹ä»¶å¤„ç†çš„å›è°ƒéƒ½æœ‰ä¸€ä¸ª evt å‚æ•°ï¼ŒåŒ…å«ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶æ•°æ® nativeEventã€‚nativeEvent çš„è¯¦ç»†å†…å®¹å¦‚ä¸‹ changedTouches - åœ¨ä¸Šä¸€æ¬¡äº‹ä»¶ä¹‹åï¼Œæ‰€æœ‰å‘ç”Ÿå˜åŒ–çš„è§¦æ‘¸äº‹ä»¶çš„æ•°ç»„é›†åˆï¼ˆå³ä¸Šä¸€æ¬¡äº‹ä»¶åï¼Œæ‰€æœ‰ç§»åŠ¨è¿‡çš„è§¦æ‘¸ç‚¹ï¼‰ identifier - è§¦æ‘¸ç‚¹çš„ ID locationX - è§¦æ‘¸ç‚¹ç›¸å¯¹äºå½“å‰å…ƒç´ çš„æ¨ªåæ ‡ locationY - è§¦æ‘¸ç‚¹ç›¸å¯¹äºå½“å‰å…ƒç´ çš„çºµåæ ‡ pageX - è§¦æ‘¸ç‚¹ç›¸å¯¹äºæ ¹å…ƒç´ çš„æ¨ªåæ ‡ pageY - è§¦æ‘¸ç‚¹ç›¸å¯¹äºæ ¹å…ƒç´ çš„çºµåæ ‡ target - è§¦æ‘¸ç‚¹æ‰€åœ¨çš„å…ƒç´  ID timestamp - è§¦æ‘¸äº‹ä»¶çš„æ—¶é—´æˆ³ï¼Œå¯ç”¨äºç§»åŠ¨é€Ÿåº¦çš„è®¡ç®— touches - å½“å‰å±å¹•ä¸Šçš„æ‰€æœ‰è§¦æ‘¸ç‚¹çš„é›†åˆ 3ã€PanResponder RNæä¾›äº†å†…ç½®çš„æ‰‹åŠ¿è¯†åˆ«åº“PanResponderï¼Œå®ƒå°è£…äº†ä¸Šé¢çš„äº‹ä»¶å›è°ƒå‡½æ•°ï¼Œå¯¹è§¦æ‘¸äº‹ä»¶æ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œå®Œæˆæ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«ï¼š PanResponderçš„æ¯ä¸ªæ–¹æ³•ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªevtå‚æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°gestureStateï¼ŒgestureStateæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰‹åŠ¿è¿›è¡Œè¿‡ç¨‹ä¸­æ›´å¤šçš„ä¿¡æ¯ 3.1 ä¸€ä¸ªgestureStateå¯¹è±¡æœ‰å¦‚ä¸‹çš„å­—æ®µï¼š stateID - è§¦æ‘¸çŠ¶æ€çš„ IDã€‚åœ¨å±å¹•ä¸Šæœ‰è‡³å°‘ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ª ID ä¼šä¸€ç›´æœ‰æ•ˆã€‚ moveX - æœ€è¿‘ä¸€æ¬¡ç§»åŠ¨æ—¶çš„å±å¹•æ¨ªåæ ‡ moveY - æœ€è¿‘ä¸€æ¬¡ç§»åŠ¨æ—¶çš„å±å¹•çºµåæ ‡ x0 - å½“å“åº”å™¨äº§ç”Ÿæ—¶çš„å±å¹•åæ ‡ y0 - å½“å“åº”å™¨äº§ç”Ÿæ—¶çš„å±å¹•åæ ‡ dx - ä»è§¦æ‘¸æ“ä½œå¼€å§‹æ—¶çš„ç´¯è®¡æ¨ªå‘è·¯ç¨‹ dy - ä»è§¦æ‘¸æ“ä½œå¼€å§‹æ—¶çš„ç´¯è®¡çºµå‘è·¯ç¨‹ vx - å½“å‰çš„æ¨ªå‘ç§»åŠ¨é€Ÿåº¦ vy - å½“å‰çš„çºµå‘ç§»åŠ¨é€Ÿåº¦ numberActiveTouches - å½“å‰åœ¨å±å¹•ä¸Šçš„æœ‰æ•ˆè§¦æ‘¸ç‚¹çš„æ•°é‡ 3.2 PanResponder.create()æ–¹æ³•ä¸­ï¼Œå¯é…ç½®çš„å±æ€§ï¼š onMoveShouldSetPanResponder: (e, gestureState) => {...} onMoveShouldSetPanResponderCapture: (e, gestureState) => {...} onStartShouldSetPanResponder: (e, gestureState) => {...} onStartShouldSetPanResponderCapture: (e, gestureState) => {...} onPanResponderReject: (e, gestureState) => {...} onPanResponderGrant: (e, gestureState) => {...} onPanResponderStart: (e, gestureState) => {...} onPanResponderEnd: (e, gestureState) => {...} onPanResponderRelease: (e, gestureState) => {...} onPanResponderMove: (e, gestureState) => {...} onPanResponderTerminate: (e, gestureState) => {...} onPanResponderTerminationRequest: (e, gestureState) => {...} onShouldBlockNativeResponder: (e, gestureState) => {...} 3.3 ä½¿ç”¨PanResponder,ç®€å•å®ç°ä¸€ä¸ªæ‹–æ‹½è§†å›¾ï¼š import React, {Component} from 'react'; import { StyleSheet, View, PanResponder } from 'react-native'; export default class GestureScreen extends Component { constructor(props) { super(props); this.state = { top:0, left:0 }; this.panResponder = PanResponder.create({ onStartShouldSetPanResponder: () => true, onMoveShouldSetPanResponder: ()=> true, onPanResponderGrant: ()=>{ this.top = this.state.top; this.left = this.state.left; }, onPanResponderMove: (evt,gestureState)=>{ this.setState({ top: this.top+gestureState.dy, left: this.left+gestureState.dx }) }, onPanResponderRelease: (evt,gestureState)=>{ this.setState({ top: this.top+gestureState.dy, left: this.left+gestureState.dx })} }) } render() { return ( ); } } const styles = StyleSheet.create({ container: { flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: '#F5FCFF', }, dragview: { width: 100, height: 100, backgroundColor:'red', borderRadius:50, } }); 4ã€æ€»ç»“ é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯ä»¥çœ‹åˆ° RN ä¸­æä¾›äº†ç±»ä¼¼ Native å¹³å°çš„äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å®ç°å„ç§çš„è§¦æ‘¸äº‹ä»¶å¤„ç†ï¼Œç”šè‡³ä¹Ÿå¯ä»¥å®ç°å¤æ‚çš„æ‰‹åŠ¿è¯†åˆ«ã€‚ å¦å¤–éœ€è¦æ³¨æ„ï¼Œå› ä¸º RN çš„å¼‚æ­¥é€šä¿¡å’Œæ‰§è¡Œæœºåˆ¶ï¼Œå‰é¢æè¿°çš„æ‰€æœ‰å›è°ƒå‡½æ•°éƒ½æ˜¯åœ¨ JS çº¿ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯ Native çš„ UI çº¿ç¨‹ï¼Œè€Œ Native å¹³å°çš„ Touch äº‹ä»¶éƒ½æ˜¯åœ¨ UI çº¿ç¨‹ä¸­ã€‚æ‰€ä»¥åœ¨ JS ä¸­é€šè¿‡ Touch æˆ–è€…æ‰‹åŠ¿å®ç°åŠ¨ç”»ï¼Œå¯èƒ½ä¼šå»¶è¿Ÿçš„é—®é¢˜ã€‚ æœ¬æ–‡æ˜¯æµ…æï¼Œä»‹ç»æ¯”è¾ƒç®€å•ã€‚å¯èƒ½å­˜åœ¨è¯¸å¤šé”™è¯¯å’Œä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿äº¤æµã€‚ å‚è€ƒï¼š æ‰‹åŠ¿å“åº”ç³»ç»Ÿ_å®˜æ–¹æ–‡æ¡£ PanResponder_å®˜æ–¹æ–‡æ¡£ â€œæŒ‡å°–ä¸Šçš„é­”æ³•â€ -- è°ˆè°ˆReact-Nativeä¸­çš„æ‰‹åŠ¿ ReactNative ä¸­å¸¸è§çš„å¯è§¦æ§æ–¹æ³• React Native è§¦æ‘¸äº‹ä»¶å¤„ç†è¯¦è§£ Copyright Â© BulldogX all right reservedï¼Œpowered by Gitbookä¿®è®¢æ—¶é—´ï¼š 2019-12-13 16:13:02 "}}